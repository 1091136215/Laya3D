var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _GameUI = require("./script/GameUI");

var _GameUI2 = _interopRequireDefault(_GameUI);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
    function GameConfig() {
        _classCallCheck(this, GameConfig);
    }

    _createClass(GameConfig, null, [{
        key: "init",
        value: function init() {
            //注册Script或者Runtime引用
            var reg = Laya.ClassUtils.regClass;
            reg("script/GameUI.js", _GameUI2.default);
        }
    }]);

    return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 640;
GameConfig.height = 1136;
GameConfig.scaleMode = "fixedwidth";
GameConfig.screenMode = "none";
GameConfig.alignV = "top";
GameConfig.alignH = "left";
GameConfig.startScene = "test/TestScene.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./script/GameUI":10}],2:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

var _layaMaxUI = require("./ui/layaMaxUI");

var _layaMaxUI2 = _interopRequireDefault(_layaMaxUI);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
	function Main() {
		_classCallCheck(this, Main);

		//根据IDE设置初始化引擎		
		if (window["Laya3D"]) Laya3D.init(_GameConfig2.default.width, _GameConfig2.default.height);else Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, Laya["WebGL"]);
		Laya["Physics"] && Laya["Physics"].enable();
		Laya["DebugPanel"] && Laya["DebugPanel"].enable();
		Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
		Laya.stage.screenMode = _GameConfig2.default.screenMode;
		Laya.stage.alignV = _GameConfig2.default.alignV;
		Laya.stage.alignH = _GameConfig2.default.alignH;
		//兼容微信不支持加载scene后缀场景
		Laya.URL.exportSceneToJson = _GameConfig2.default.exportSceneToJson;

		//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
		if (_GameConfig2.default.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
		if (_GameConfig2.default.physicsDebug && Laya["PhysicsDebugDraw"]) Laya["PhysicsDebugDraw"].enable();
		if (_GameConfig2.default.stat) Laya.Stat.show();
		Laya.alertGlobalError = true;

		//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
		Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
	}

	_createClass(Main, [{
		key: "onVersionLoaded",
		value: function onVersionLoaded() {
			//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
			Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
		}
	}, {
		key: "onConfigLoaded",
		value: function onConfigLoaded() {
			//加载IDE指定的场景
			_GameConfig2.default.startScene && Laya.Scene.open(_GameConfig2.default.startScene);
		}
	}]);

	return Main;
}();
//激活启动类


new Main();

},{"./GameConfig":1,"./ui/layaMaxUI":14}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameMainScene = require("./GameMainScene");

var _GameMainScene2 = _interopRequireDefault(_GameMainScene);

var _Observer = require("./Observer");

var _Observer2 = _interopRequireDefault(_Observer);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var CameraManager = function (_Laya$Script3D) {
    _inherits(CameraManager, _Laya$Script3D);

    function CameraManager() {
        _classCallCheck(this, CameraManager);

        var _this = _possibleConstructorReturn(this, (CameraManager.__proto__ || Object.getPrototypeOf(CameraManager)).call(this));

        _this._tempVector3 = new Laya.Vector3();
        _this.yawPitchRoll = new Laya.Vector3();
        _this.resultRotation = new Laya.Quaternion();
        _this.tempRotationZ = new Laya.Quaternion();
        _this.tempRotationX = new Laya.Quaternion();
        _this.tempRotationY = new Laya.Quaternion();
        _this.rotaionSpeed = 0.00006;
        _this.cameraDebug = true;
        //观察者
        _this.mainSceneObser = 0;
        return _this;
    }

    _createClass(CameraManager, [{
        key: "onAwake",
        value: function onAwake() {
            this.camera = this.owner;
            this.mainSceneObser = this.camera.parent.getComponent(_GameMainScene2.default).mainObserver;
            if (this.cameraDebug) {
                Laya.stage.on(Laya.Event.RIGHT_MOUSE_DOWN, this, this.mouseDown);
                Laya.stage.on(Laya.Event.RIGHT_MOUSE_UP, this, this.mouseUp);
            }
            this.mainSceneObser.watch("cameraMove", this.setPosAndRotation.bind(this));
        }
    }, {
        key: "_onDestroy",
        value: function _onDestroy() {
            //关闭监听函数
            Laya.stage.off(Laya.Event.RIGHT_MOUSE_DOWN, this, this.mouseDown);
            Laya.stage.off(Laya.Event.RIGHT_MOUSE_UP, this, this.mouseUp);
        }
    }, {
        key: "onUpdate",
        value: function onUpdate(state) {

            if (!this.cameraDebug) return;
            Laya.KeyBoardManager.hasKeyDown(37) && this.showPosAndRotation(null, 0.01, null);
            var elapsedTime = Laya.timer.delta;
            if (!isNaN(this.lastMouseX) && !isNaN(this.lastMouseY) && this.isMouseDown) {
                var scene = this.owner.scene;
                Laya.KeyBoardManager.hasKeyDown(87) && this.moveForward(-0.01 * elapsedTime); //W
                Laya.KeyBoardManager.hasKeyDown(83) && this.moveForward(0.01 * elapsedTime); //S
                Laya.KeyBoardManager.hasKeyDown(65) && this.moveRight(-0.01 * elapsedTime); //A
                Laya.KeyBoardManager.hasKeyDown(68) && this.moveRight(0.01 * elapsedTime); //D
                Laya.KeyBoardManager.hasKeyDown(81) && this.moveVertical(0.01 * elapsedTime); //Q
                Laya.KeyBoardManager.hasKeyDown(69) && this.moveVertical(-0.01 * elapsedTime); //E

                var offsetX = Laya.stage.mouseX - this.lastMouseX;
                var offsetY = Laya.stage.mouseY - this.lastMouseY;

                var yprElem = this.yawPitchRoll;
                yprElem.x -= offsetX * this.rotaionSpeed * elapsedTime;
                yprElem.y -= offsetY * this.rotaionSpeed * elapsedTime;
                this.updateRotation();
            }
            this.lastMouseX = Laya.stage.mouseX;
            this.lastMouseY = Laya.stage.mouseY;
        }
    }, {
        key: "mouseDown",
        value: function mouseDown(e) {
            if (!this.cameraDebug) return;
            //获得鼠标的旋转值
            this.camera.transform.localRotation.getYawPitchRoll(this.yawPitchRoll);
            //获得鼠标的xy值
            this.lastMouseX = Laya.stage.mouseX;
            this.lastMouseY = Laya.stage.mouseY;
            //设置bool值
            this.isMouseDown = true;
        }
    }, {
        key: "mouseUp",
        value: function mouseUp(e) {
            if (!this.cameraDebug) return;
            //设置bool值
            this.isMouseDown = false;
        }
        /**
         * 向前移动。
         */

    }, {
        key: "moveForward",
        value: function moveForward(distance) {
            this._tempVector3.x = 0;
            this._tempVector3.y = 0;
            this._tempVector3.z = distance;
            this.camera.transform.translate(this._tempVector3);
        }
        /**
         * 向右移动。
         */

    }, {
        key: "moveRight",
        value: function moveRight(distance) {
            this._tempVector3.y = 0;
            this._tempVector3.z = 0;
            this._tempVector3.x = distance;
            this.camera.transform.translate(this._tempVector3);
        }
        /**
         * 向上移动。
         */

    }, {
        key: "moveVertical",
        value: function moveVertical(distance) {
            this._tempVector3.x = this._tempVector3.z = 0;
            this._tempVector3.y = distance;
            this.camera.transform.translate(this._tempVector3, false);
        }
    }, {
        key: "updateRotation",
        value: function updateRotation() {
            Laya.Quaternion.createFromYawPitchRoll(this.yawPitchRoll.x, this.yawPitchRoll.y, this.yawPitchRoll.z, this.tempRotationZ);
            this.tempRotationZ.cloneTo(this.camera.transform.localRotation);
            this.camera.transform.localRotation = this.camera.transform.localRotation;
        }
    }, {
        key: "showPosAndRotation",
        value: function showPosAndRotation() {
            console.log("information:Position");
            console.log(this.camera.transform.position);
            console.log("information:Rotation");
            console.log(this.camera.transform.rotation);
        }
    }, {
        key: "setPosAndRotation",
        value: function setPosAndRotation(isInit, pos, rotation) {
            if (pos) {
                var posInfo = {
                    curPos: this.camera.transform.position,
                    changePos: pos
                };
                if (isInit) {
                    this.camera.transform.position = posInfo.changePos;
                } else {
                    var finalPos = new Laya.Vector3(0, 0, 0);
                    Laya.Vector3.add(posInfo.curPos, posInfo.changePos, finalPos);
                    this.camera.transform.localPosition = finalPos;
                }
            }
            if (rotation) {
                var rotationInfo = {
                    curRotation: this.camera.transform.rotation,
                    changeRotation: rotation
                };
                if (isInit) {
                    this.camera.transform.rotation = rotationInfo.changeRotation;
                } else {
                    var finalRotation = new Laya.Vector4(0, 0, 0, 0);
                    Laya.Vector4.add(rotationInfo.changeRotation, rotationInfo.curRotation, finalRotation);
                    this.camera.transform.rotation = finalRotation;
                }
            }
        }
    }, {
        key: "updateRotate",
        value: function updateRotate(k, b, z) {
            if (k && b) {
                this.camera.transform.rotate(new Laya.Vector3(k, 0, b));
            }
            if (z) {
                this.camera.transform.rotate(new Laya.Vector3(0, z, 0));
            }
        }
    }]);

    return CameraManager;
}(Laya.Script3D);

exports.default = CameraManager;

},{"./GameMainScene":8,"./Observer":13}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var CameraTransSet = function (_Laya$Script3D) {
    _inherits(CameraTransSet, _Laya$Script3D);

    function CameraTransSet() {
        _classCallCheck(this, CameraTransSet);

        return _possibleConstructorReturn(this, (CameraTransSet.__proto__ || Object.getPrototypeOf(CameraTransSet)).call(this));
        // this.startPos = new Laya.Vector3(0, -5.15, -1.19);
        // this.startRotation = new Laya.Vector4(0.03397365063332456, -0.0206223826428884, -0.854162119843573, -0.5184858546007872);
    }

    _createClass(CameraTransSet, [{
        key: "onAwake",
        value: function onAwake() {
            this.camera = this.owner;
            //  this.setPosAndRotation(true, this.startPos, this.startRotation);
        }
    }, {
        key: "setPosAndRotation",
        value: function setPosAndRotation(isInit, pos, rotation, rotate) {
            if (pos) {
                var posInfo = {
                    curPos: this.camera.transform.position,
                    changePos: pos
                };
                if (isInit) {
                    this.camera.transform.position = posInfo.changePos;
                } else {
                    var finalPos = new Laya.Vector3(0, 0, 0);
                    Laya.Vector3.add(posInfo.curPos, posInfo.changePos, finalPos);
                    this.camera.transform.position = finalPos;
                }
            }
            if (rotation) {
                var rotationInfo = {
                    curRotation: this.camera.transform.rotation,
                    changeRotation: rotation
                };
                if (isInit) {
                    this.camera.transform.rotation = rotationInfo.changeRotation;
                } else {
                    var finalRotation = new Laya.Vector4(0, 0, 0, 0);
                    Laya.Vector4.add(rotationInfo.changeRotation, rotationInfo.curRotation, finalRotation);
                    this.camera.transform.rotation = finalRotation;
                }
            }
            if (rotate) {
                this.camera.transform.rotate(rotate);
            }
        }
    }]);

    return CameraTransSet;
}(Laya.Script3D);

exports.default = CameraTransSet;

},{}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameMainScene = require("./GameMainScene");

var _GameMainScene2 = _interopRequireDefault(_GameMainScene);

var _GamePool = require("./GamePool");

var _GamePool2 = _interopRequireDefault(_GamePool);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FloorBarManager = function (_Laya$Script3D) {
    _inherits(FloorBarManager, _Laya$Script3D);

    function FloorBarManager() {
        _classCallCheck(this, FloorBarManager);

        //设定速度
        var _this = _possibleConstructorReturn(this, (FloorBarManager.__proto__ || Object.getPrototypeOf(FloorBarManager)).call(this));

        _this.rotationData = 0;
        _this.rotateVec = Laya.Vector3.ZERO;
        _this.timeInterv = 0;
        _this.rotationSpeed = 0.7;
        _this.flag = false;
        //obser
        _this.mainSceneObser = 0;
        _this.isDispose = false;
        //pool
        _this.floorBarPool = 0;
        _this.floorRecycle = 2;
        _this.trans = { pos: 0, rot: 0 };

        return _this;
    }

    _createClass(FloorBarManager, [{
        key: "onAwake",
        value: function onAwake() {
            this.gameObj = this.owner;
        }
    }, {
        key: "onStart",
        value: function onStart() {
            this.mainSceneObser.watch("gameOver", this.disPose.bind(this));
            this.mainSceneObser.watch("recycle", this.recycleObj.bind(this));
            this.trans.pos = this.gameObj.transform.position;
            this.trans.rot = this.gameObj.transform.rotation;
        }
    }, {
        key: "onEnable",
        value: function onEnable() {
            this.timeInterv = 0;
            if (this.gameObj.getChildAt(0)) {
                this.gameObj.getChildAt(0).active = false;
            }
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {
            if (this.isDispose) return;
            if (this.gameObj.name === _GameMainScene2.default.floorBarType.abnormal && this.rotationData !== 0) {
                this.timeInterv += this.rotationSpeed;
                this.rotateVec.setValue(0, 0, this.rotationSpeed * (this.flag ? 1 : -1));
                this.gameObj.transform.rotate(this.rotateVec, true, false);
                if (this.timeInterv > this.rotationData) {
                    this.timeInterv = 0;
                    this.flag = !this.flag;
                }
            }
        }
    }, {
        key: "onDisable",
        value: function onDisable() {
            this.gameObj.transform.position = this.trans.pos;
            this.gameObj.transform.rotation = this.trans.rot;
        }
    }, {
        key: "disPose",
        value: function disPose() {
            this.isDispose = true;
        }
    }, {
        key: "recycleObj",
        value: function recycleObj(curFloorIndex) {
            if (curFloorIndex - this.floorRecycle >= 0) {
                var index = this.gameObj.parent.parent.parent.getChildIndex(this.gameObj.parent.parent);
                if (index == curFloorIndex - this.floorRecycle) {
                    if (this.gameObj.name == _GameMainScene2.default.floorBarType.abnormal || this.gameObj.name == _GameMainScene2.default.floorBarType.normal) this.floorBarPool.putItem(this.gameObj.name, this.gameObj);
                }
            }
        }
    }]);

    return FloorBarManager;
}(Laya.Script3D);

exports.default = FloorBarManager;

},{"./GameMainScene":8,"./GamePool":9}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameMainScene = require("./GameMainScene");

var _GameMainScene2 = _interopRequireDefault(_GameMainScene);

var _FloorBarManager = require("./FloorBarManager");

var _FloorBarManager2 = _interopRequireDefault(_FloorBarManager);

var _GamePool = require("./GamePool");

var _GamePool2 = _interopRequireDefault(_GamePool);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FloorCreateManager = function (_Laya$Script3D) {
    _inherits(FloorCreateManager, _Laya$Script3D);

    function FloorCreateManager() {
        _classCallCheck(this, FloorCreateManager);

        //观察者
        var _this = _possibleConstructorReturn(this, (FloorCreateManager.__proto__ || Object.getPrototypeOf(FloorCreateManager)).call(this));

        _this.mainSceneObser = 0;
        //对象池
        _this.floorBarPool = _GamePool2.default.getInstance();
        //预制体数组
        _this.prefabArr = 0;
        //一次性生产Floor层数
        _this.creatLayer = 4;
        //每层之间的间隔y值
        _this.FloorInterv = 5; //8
        _this.curFloorLayerIndex = 0; //
        _this.singleFloorPos = Laya.Vector3.ZERO;
        // 装备
        _this.equipArr = 0;
        _this.spaceArr = 0;
        //静止障碍块
        _this.stillRiskMat = new Laya.PBRStandardMaterial();
        _this.normalMat = new Laya.PBRStandardMaterial();
        _this.stillRiskScale = new Laya.Vector3(1.01, 1.01, 1.01);
        //移动障碍
        _this.moveRiskScale = new Laya.Vector3(1.005, 1.005, 1.005);
        //
        _this.equipStarRotation = new Laya.Vector4(0, 0, 0, -1);
        return _this;
    }

    _createClass(FloorCreateManager, [{
        key: "onAwake",
        value: function onAwake() {
            this.gameObj = this.owner;
            this.mainSceneObser = this.gameObj.parent.getComponent(_GameMainScene2.default).mainObserver;
            this.mainSceneObser.watch("creatFloor", this.floorInit.bind(this));
            this.stillRiskMat.albedoColor = new Laya.Vector4(1, 0, 0, 1); //红色
        }
    }, {
        key: "onStart",
        value: function onStart() {
            //隐藏预制体
            for (var key in this.prefabArr) {
                this.prefabArr[key].active = false;
            }
            this.equipArr = this.prefabArr.concat();
            this.equipArr.splice(0, 1);
            this.floorInit(this.creatLayer);
        }
        //初始化

    }, {
        key: "floorInit",
        value: function floorInit(num) {
            //当前层数
            var floorIndex = 0;
            while (floorIndex < num) {
                //一层的总Floor
                var singleFloor = new Laya.Sprite3D();
                var randomData = this.getRandomData(); //获取的json数据
                var baseBlock = this.createBaseBlock(randomData);
                var spBlock = this.creatSPBlock(randomData);
                singleFloor.addChild(baseBlock);
                singleFloor.addChild(spBlock);
                this.singleFloorPos.setValue(0, -this.curFloorLayerIndex * this.FloorInterv, 0);
                singleFloor.transform.translate(this.singleFloorPos, true);
                floorIndex++;
                this.curFloorLayerIndex++;
                this.gameObj.addChild(singleFloor);
            }
        }
        /**获取随机数据 */

    }, {
        key: "getRandomData",
        value: function getRandomData() {
            var jsonData = Laya.loader.getRes("res/KHXM.json");
            var jsonArr = Object.keys(jsonData).map(function (key) {
                return jsonData[key];
            });
            var randomIndex = Math.floor(Math.random() * jsonArr.length);
            return jsonArr[randomIndex];
        }
    }, {
        key: "createBaseBlock",
        value: function createBaseBlock(randomData) {
            var baseBlockObjs = new Laya.Sprite3D();
            this.spaceArr = [];
            var floorClone = void 0;
            for (var j = 0; j < randomData.base_block.length; j++) {
                var obj = randomData.base_block[j];
                if (obj) {
                    floorClone = this.CloneObj(this.prefabArr[0], baseBlockObjs, _GameMainScene2.default.floorBarType.normal);
                    if (!floorClone.getComponent(_FloorBarManager2.default)) {
                        floorClone.addComponent(_FloorBarManager2.default);
                        floorClone.getComponent(_FloorBarManager2.default).mainSceneObser = this.mainSceneObser;
                        floorClone.getComponent(_FloorBarManager2.default).floorBarPool = this.floorBarPool;
                    }
                    floorClone.meshRenderer.material = this.normalMat;
                    if (obj === 2) {
                        floorClone.name = _GameMainScene2.default.floorBarType.stillObstacle;
                        //floorClone材质设置
                        floorClone.meshRenderer.material = this.stillRiskMat;
                        floorClone.transform.localScale = this.stillRiskScale;
                    }
                    //反转//todo
                    //位置调整
                    floorClone.transform.rotate(new Laya.Vector3(0, 0, j * 22.5), true, false);
                    floorClone.active = true;
                } else {
                    this.spaceArr.push(j);
                }
            }
            //随机添加道具
            if (this.creatEquipChance(1)) {
                //每一层出现道具的几率
                var ranEquip = this.ranElement(this.equipArr);
                var equipClone = this.CloneObj(ranEquip, baseBlockObjs, ranEquip.name);
                //随机位置
                var randomPos = this.ranElement(this.spaceArr);
                equipClone.transform.rotate(new Laya.Vector3(0, randomPos * 22.5, 0), true, false);
                equipClone.active = true;
            }
            return baseBlockObjs;
        }
    }, {
        key: "creatSPBlock",
        value: function creatSPBlock(randomData) {
            var spBlockObjs = new Laya.Sprite3D();
            for (var j = 0; j < randomData.sp_block_size.length; j++) {
                var obj = randomData.sp_block_size[j];
                if (obj) {
                    var num = 0;
                    while (num < obj) {
                        var floorClone = this.CloneObj(this.prefabArr[0], spBlockObjs, _GameMainScene2.default.floorBarType.abnormal);
                        if (!floorClone.getComponent(_FloorBarManager2.default)) {
                            floorClone.addComponent(_FloorBarManager2.default);
                            floorClone.getComponent(_FloorBarManager2.default).mainSceneObser = this.mainSceneObser;
                            floorClone.getComponent(_FloorBarManager2.default).floorBarPool = this.floorBarPool;
                            //添加标签
                            floorClone.name = _GameMainScene2.default.floorBarType.abnormal;
                            //floorClone材质设置
                            floorClone.meshRenderer.material = this.stillRiskMat;
                            floorClone.transform.localScale = this.moveRiskScale;
                        }
                        //速度
                        floorClone.getComponent(_FloorBarManager2.default).rotationData = randomData.sp_block_move_speed[j];
                        //起始位置
                        floorClone.transform.rotate(new Laya.Vector3(0, 0, num * 22.5 + randomData.sp_block_start_pos[j] * 22.5), true, false);
                        //反转 todo
                        floorClone.active = true;
                        num++;
                    }
                }
                return spBlockObjs;
            }
        }
    }, {
        key: "CloneObj",
        value: function CloneObj(moudle, parent, name) {
            var doTrans = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;

            var clone = this.floorBarPool.getItem(name);
            if (clone) {
                // if (!parent.getChildByName(clone.name)) {
                parent.addChild(clone);
            } else {
                clone = Laya.Sprite3D.instantiate(moudle, parent, false);
                clone.name = name;
            }
            if (doTrans) {
                clone.transform.position = moudle.transform.position;
                clone.transform.rotation = moudle.transform.rotation;
            }

            return clone;
        }
    }, {
        key: "ranElement",
        value: function ranElement(arr) {
            var randomIndex = Math.floor(Math.random() * arr.length);
            return arr[randomIndex];
        }
        //euqip creat probability

    }, {
        key: "creatEquipChance",
        value: function creatEquipChance(pro) {
            return Math.random() < pro;
        }
    }]);

    return FloorCreateManager;
}(Laya.Script3D);

exports.default = FloorCreateManager;

},{"./FloorBarManager":5,"./GameMainScene":8,"./GamePool":9}],7:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameMainScene = require("./GameMainScene");

var _GameMainScene2 = _interopRequireDefault(_GameMainScene);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FloorMoveManager = function (_Laya$Script3D) {
    _inherits(FloorMoveManager, _Laya$Script3D);

    function FloorMoveManager() {
        _classCallCheck(this, FloorMoveManager);

        var _this = _possibleConstructorReturn(this, (FloorMoveManager.__proto__ || Object.getPrototypeOf(FloorMoveManager)).call(this));

        _this.yawPitchRoll = new Laya.Vector3();
        _this.tempRotationZ = new Laya.Quaternion();
        _this.rotaionSpeed = 0.0005;
        //obser
        _this.mainSceneObser = 0;
        _this.isDispose = false;
        return _this;
    }

    _createClass(FloorMoveManager, [{
        key: "onAwake",
        value: function onAwake() {
            Laya.stage.on(Laya.Event.MOUSE_DOWN, this, this.mouseDown);
            Laya.stage.on(Laya.Event.MOUSE_UP, this, this.mouseUp);
            this.gameObj = this.owner;
            this.mainSceneObser = this.gameObj.parent.getComponent(_GameMainScene2.default).mainObserver;
            this.mainSceneObser.watch("gameOver", this.disPose.bind(this));
        }
    }, {
        key: "_onDestroy",
        value: function _onDestroy() {
            //关闭监听函数
            Laya.stage.off(Laya.Event.MOUSE_DOWN, this, this.mouseDown);
            Laya.stage.off(Laya.Event.MOUSE_UP, this, this.mouseUp);
        }
    }, {
        key: "onUpdate",
        value: function onUpdate(state) {
            if (this.isDispose) return;
            var elapsedTime = Laya.timer.delta;
            if (!isNaN(this.lastMouseX) && this.isMouseDown) {
                var offsetX = Laya.stage.mouseX - this.lastMouseX;
                var yprElem = this.yawPitchRoll;
                yprElem.x += offsetX * this.rotaionSpeed * elapsedTime;
                this.updateRotate(offsetX * this.rotaionSpeed * elapsedTime);
            }
            this.lastMouseX = Laya.stage.mouseX;
        }
    }, {
        key: "mouseDown",
        value: function mouseDown(e) {
            //获得鼠标的旋转值
            this.gameObj.transform.localRotation.getYawPitchRoll(this.yawPitchRoll);
            //获得鼠标的x值
            this.lastMouseX = Laya.stage.mouseX;
            //设置bool值
            this.isMouseDown = true;
        }
    }, {
        key: "mouseUp",
        value: function mouseUp(e) {
            //设置bool值
            this.isMouseDown = false;
        }
    }, {
        key: "updateRotate",
        value: function updateRotate(k) {
            this.gameObj.transform.rotate(new Laya.Vector3(0, k, 0));
        }
    }, {
        key: "disPose",
        value: function disPose() {
            Laya.stage.off(Laya.Event.MOUSE_DOWN, this, this.mouseDown);
            Laya.stage.off(Laya.Event.MOUSE_UP, this, this.mouseUp);
            this.isDispose = true;
        }
    }]);

    return FloorMoveManager;
}(Laya.Script3D);

exports.default = FloorMoveManager;

},{"./GameMainScene":8}],8:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _ManManager = require("./ManManager");

var _ManManager2 = _interopRequireDefault(_ManManager);

var _FloorMoveManager = require("./FloorMoveManager");

var _FloorMoveManager2 = _interopRequireDefault(_FloorMoveManager);

var _FloorCreateManager = require("./FloorCreateManager");

var _FloorCreateManager2 = _interopRequireDefault(_FloorCreateManager);

var _CameraManager = require("./CameraManager");

var _CameraManager2 = _interopRequireDefault(_CameraManager);

var _Observer = require("./Observer");

var _Observer2 = _interopRequireDefault(_Observer);

var _CameraTransSet = require("./CameraTransSet");

var _CameraTransSet2 = _interopRequireDefault(_CameraTransSet);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GameMainScene = function (_Laya$Script3D) {
    _inherits(GameMainScene, _Laya$Script3D);

    function GameMainScene() {
        _classCallCheck(this, GameMainScene);

        var _this = _possibleConstructorReturn(this, (GameMainScene.__proto__ || Object.getPrototypeOf(GameMainScene)).call(this));

        _this.mainObserver = new _Observer2.default();
        return _this;
    }

    _createClass(GameMainScene, [{
        key: "onAwake",
        value: function onAwake() {
            this.scene = this.owner;
        }
    }, {
        key: "onStart",
        value: function onStart() {
            var mainCamera = this.scene.getChildByName("Main Camera");
            //mainCamera.addComponent(CameraManager);
            //mainCamera.addComponent(CameraTransSet);
            var mainLight = this.scene.getChildByName("Directional Light");
            var doublePrefab = this.scene.getChildByName("DOUBLEMARK");
            var defence = this.scene.getChildByName("DEFENCE");
            var rocket = this.scene.getChildByName("ROCKET");
            //地板预制体
            var floorBarPrefab = this.scene.getChildByName("FloorBar");
            // //空地板预制体
            // var blankFloorPrefab = this.scene.getChildByName("BlankFloor");
            //地板容器
            var creatFloor = this.scene.getChildByName("FloorCreat");
            var prefabArr = [floorBarPrefab, doublePrefab, defence, rocket];
            creatFloor.addComponent(_FloorCreateManager2.default).prefabArr = prefabArr;
            creatFloor.addComponent(_FloorMoveManager2.default);
            //撞击特效模型
            var landColliEft = this.scene.getChildByName("LandColliEft");
            //获取小球
            var man = this.scene.getChildByName("Man");
            man.addComponent(_ManManager2.default).floorContainer = creatFloor;
            var manScript = man.getComponent(_ManManager2.default);
            manScript.camera = mainCamera;
            manScript.landColliEft = landColliEft;
        }
    }]);

    return GameMainScene;
}(Laya.Script3D);

exports.default = GameMainScene;

GameMainScene.floorBarType = {
    normal: "NORMAL",
    abnormal: "ABNORMAL",
    stillObstacle: "STILLOBSTACLE",
    doubleMark: "DOUBLEMARK",
    defence: "DEFENCE",
    rocket: "ROCKET"

};

},{"./CameraManager":3,"./CameraTransSet":4,"./FloorCreateManager":6,"./FloorMoveManager":7,"./ManManager":12,"./Observer":13}],9:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GamePool = function () {
    function GamePool() {
        _classCallCheck(this, GamePool);

        this._pool = {};
    }

    _createClass(GamePool, [{
        key: "getItem",
        value: function getItem(key) {
            if (this._pool[key]) {
                if (this._pool[key].length) {
                    return this._pool[key].pop();
                }
            }
        }
    }, {
        key: "putItem",
        value: function putItem(key, obj) {
            obj.active = false;
            if (this._pool[key]) {
                this._pool[key].push(obj);
            } else {
                this._pool[key] = [];
                this._pool[key].push(obj);
            }
        }
    }], [{
        key: "getInstance",
        value: function getInstance() {
            if (!this._instance) {
                this._instance = new GamePool();
            }
            return this._instance;
        }
        // getPool(type) {

        // }
        // clearPool(type) {

        // }

    }]);

    return GamePool;
}();

exports.default = GamePool;

},{}],10:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameMainScene = require("./GameMainScene");

var _GameMainScene2 = _interopRequireDefault(_GameMainScene);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * 本示例采用非脚本的方式实现，而使用继承页面基类，实现页面逻辑。在IDE里面设置场景的Runtime属性即可和场景进行关联
 * 相比脚本方式，继承式页面类，可以直接使用页面定义的属性（通过IDE内var属性定义），比如this.tipLbll，this.scoreLbl，具有代码提示效果
 * 建议：如果是页面级的逻辑，需要频繁访问页面内多个元素，使用继承式写法，如果是独立小模块，功能单一，建议用脚本方式实现，比如子弹脚本。
 */
var GameUI = function (_Laya$Scene) {
    _inherits(GameUI, _Laya$Scene);

    function GameUI() {
        _classCallCheck(this, GameUI);

        //加载场景文件
        var _this = _possibleConstructorReturn(this, (GameUI.__proto__ || Object.getPrototypeOf(GameUI)).call(this));

        _this.loadScene("test/TestScene.scene");
        var resource = [{ url: "LayaScene_SampleScene/Conventional/SampleScene.ls", type: Laya3D.HIERARCHY, priority: 1 }];
        //预加载unity场景
        Laya.loader.create(resource, Laya.Handler.create(_this, _this.onLoadFinish));
        //预加载json
        Laya.loader.load("res/KHXM.json", null, null, Laya.Loader.JSON, 0);
        Laya.Texture2D.load("res/2X_qiuti.png");
        Laya.Texture2D.load("res/fudun_qiuti.png");
        Laya.Texture2D.load("res/huojian_qiuti.png");
        return _this;
    }

    _createClass(GameUI, [{
        key: "onLoadFinish",
        value: function onLoadFinish() {
            var fightScene = Laya.Loader.getRes("LayaScene_SampleScene/Conventional/SampleScene.ls");
            Laya.stage.addChildAt(fightScene, 0);
            fightScene.addComponent(_GameMainScene2.default);
        }
    }]);

    return GameUI;
}(Laya.Scene);

exports.default = GameUI;

},{"./GameMainScene":8}],11:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GamePool = require("./GamePool");

var _GamePool2 = _interopRequireDefault(_GamePool);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var LandColliManager = function (_Laya$Script3D) {
    _inherits(LandColliManager, _Laya$Script3D);

    function LandColliManager() {
        _classCallCheck(this, LandColliManager);

        var _this = _possibleConstructorReturn(this, (LandColliManager.__proto__ || Object.getPrototypeOf(LandColliManager)).call(this));

        _this.disTime = 3;
        _this.accumtime = 0;
        _this.pool = _GamePool2.default.getInstance();
        return _this;
    }

    _createClass(LandColliManager, [{
        key: "onAwake",
        value: function onAwake() {
            this.gameObj = this.owner;
        }
    }, {
        key: "onEnable",
        value: function onEnable() {
            this.accumtime = 0;
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {
            this.accumtime += Laya.timer.delta * 0.001;
            if (this.accumtime >= this.disTime) {
                this.pool.putItem("landTexture", this.gameObj);
            }
        }
    }]);

    return LandColliManager;
}(Laya.Script3D);

exports.default = LandColliManager;

},{"./GamePool":9}],12:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameMainScene = require("./GameMainScene");

var _GameMainScene2 = _interopRequireDefault(_GameMainScene);

var _FloorCreateManager = require("./FloorCreateManager");

var _FloorCreateManager2 = _interopRequireDefault(_FloorCreateManager);

var _GamePool = require("./GamePool");

var _GamePool2 = _interopRequireDefault(_GamePool);

var _Observer = require("./Observer");

var _Observer2 = _interopRequireDefault(_Observer);

var _LandColliManager = require("./LandColliManager");

var _LandColliManager2 = _interopRequireDefault(_LandColliManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ManManager = function (_Laya$Script3D) {
    _inherits(ManManager, _Laya$Script3D);

    function ManManager() {
        _classCallCheck(this, ManManager);

        //弹起速度
        var _this = _possibleConstructorReturn(this, (ManManager.__proto__ || Object.getPrototypeOf(ManManager)).call(this));

        _this.restiSpeed = new Laya.Vector3(0, 6, 0);
        _this.impusle = new Laya.Vector3(0, -2, 0);
        //pool
        _this.manPool = _GamePool2.default.getInstance();
        _this.manRigby = 0;
        //玩家道具
        _this.equipment = {
            defence: 0,
            speeder: 0,
            doubleMark: 0
            //场景容器
        };_this.floorContainer = 0;
        //观察者
        _this.mainSceneObser = 0;
        //相机
        _this.camera = 0;

        //玩家得分
        _this.playMark = 0;
        //单次得分值
        _this.marksetValuePer = 1;
        _this.markValuePer = 0;
        //当前层数
        _this.curFloorLayer = 0;
        //连续穿过的floor
        _this.constantSetLayer = 2;
        _this.constantFloorLayer = 0;

        //player
        _this.whiteColor = new Laya.Vector4(1, 1, 1, 1);
        _this.whiteTrail = new Laya.Vector4(0, 0.8980, 0.8271, 0.5019608);
        _this.redColor = new Laya.Vector4(1, 0, 0, 1);
        _this.redTrail = new Laya.Vector4(1, 0, 0, 1);
        //撞击特效模型
        _this.landColliEft = 0;
        _this.landColliClone = 0;
        _this.landOffest = 0.2;
        //玩家贴图
        _this.manTexture = 0;
        //玩家到相机的距离
        _this.disToCamera = 5;
        //
        _this.offestNum = 0.5;
        return _this;
    }

    _createClass(ManManager, [{
        key: "onAwake",
        value: function onAwake() {
            this.gameObj = this.owner;
            this.mainSceneObser = this.gameObj.parent.getComponent(_GameMainScene2.default).mainObserver;
        }
    }, {
        key: "onStart",
        value: function onStart() {
            this.manRigby = this.gameObj.getComponent(Laya.Rigidbody3D);
            this.manRigby.mass = 2;
            this.manRigby.linearDamping = 0.1;
            this.dampRate = 0.001;
            this.markValuePer = this.marksetValuePer;
            this.gameObj.meshRenderer.material.albedoTexture = null;
            this.manTexture = null;
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {
            if (this.camera.transform.localPositionY > this.gameObj.transform.position.y + this.disToCamera) {
                this.camera.transform.localPositionY = this.gameObj.transform.position.y + this.disToCamera;
            }
            if (this.gameObj.transform.localPositionY + this.offestNum < this.floorContainer.getChildAt(this.curFloorLayer).transform.position.y) {
                this.toNextFloor();
            }
        }
    }, {
        key: "onTriggerEnter",
        value: function onTriggerEnter(other) {
            switch (other.owner.name) {
                case _GameMainScene2.default.floorBarType.normal:
                    this.contactNormalFloor(other.owner);
                    break;
                case _GameMainScene2.default.floorBarType.stillObstacle:
                case _GameMainScene2.default.floorBarType.abnormal:
                    this.contactRiskFloor(other.owner);
                    break;
                case _GameMainScene2.default.floorBarType.doubleMark:
                case _GameMainScene2.default.floorBarType.defence:
                case _GameMainScene2.default.floorBarType.rocket:
                    // this.manPool.putItem(other.owner.name, other.owner);
                    other.owner.active = false;
                    this.GetEquipment(other.owner.name);
                    break;
                default:
                    break;
            }
        }
    }, {
        key: "contactNormalFloor",
        value: function contactNormalFloor(obj) {
            var _this2 = this;

            if (this.constantFloorLayer >= this.constantSetLayer) {
                this.startCoroutine("once", 0.2, this, function () {
                    _this2.constantFloorLayer = -1;
                    _this2.gameObj.getChildAt(0).trailRenderer.material.color = _this2.whiteTrail;
                });
                this.jumpUp(obj, 0);
                this.constantEffect(this.floorContainer.getChildAt(this.curFloorLayer));
            } else {
                this.jumpUp(obj, 1);
                this.constantFloorLayer = 0;
            }
        }
    }, {
        key: "contactRiskFloor",
        value: function contactRiskFloor(obj) {
            var _this3 = this;

            if (this.constantFloorLayer >= this.constantSetLayer) {
                this.startCoroutine("once", 0.2, this, function () {
                    _this3.constantFloorLayer = -1;
                    _this3.gameObj.getChildAt(0).trailRenderer.material.color = _this3.whiteTrail;
                });
                this.jumpUp(obj, 0);
                this.constantEffect(this.floorContainer.getChildAt(this.curFloorLayer));
            } else {
                if (this.equipment.defence || this.equipment.speeder) {
                    this.jumpUp(obj, 1);
                    return;
                }
                this.dispose();
                this.constantFloorLayer = 0;
            }
        }
    }, {
        key: "toNextFloor",
        value: function toNextFloor(obj) {
            this.mainSceneObser.notice("recycle", this.curFloorLayer);
            this.mainSceneObser.notice("creatFloor", 1);
            this.markValuePer = this.marksetValuePer;
            if (this.equipment.doubleMark) {
                this.markValuePer = 2 * this.marksetValuePer;
            }
            this.playMark += this.markValuePer;
            Laya.stage.getChildAt(1).getChildAt(0).getChildAt(0).text = "分数:" + this.playMark;
            if (!this.equipment.speeder) {
                this.constantFloorLayer++;
            }
            this.curFloorLayer++;
            //改变球颜色
            if (this.constantFloorLayer >= this.constantSetLayer) {
                this.gameObj.getChildAt(0).trailRenderer.material.color = this.redTrail;
            }
        }
        //施加速度

    }, {
        key: "manForceSet",
        value: function manForceSet(force) {
            if (this.equipment.speeder) return;
            this.manRigby.linearVelocity = force;
        }
        //撞碎一层效果

    }, {
        key: "constantEffect",
        value: function constantEffect(curFloor) {
            for (var index = 0; index < curFloor._children.length; index++) {
                for (var j = 0; j < curFloor.getChildAt(index)._children.length; j++) {
                    var element = curFloor.getChildAt(index).getChildAt(j);
                    if (element.name != _GameMainScene2.default.floorBarType.normal) {
                        element.active = false;
                    }
                    if (element) {
                        element.transform.translate(new Laya.Vector3(1, 1, 1));
                        element.transform.rotate(new Laya.Vector3(30, 40, 50), false, false);
                    }
                }
            }
        }
        //结束

    }, {
        key: "dispose",
        value: function dispose() {
            this.manRigby.isKinematic = true;
            Laya.timer.clearAll(this);
            this.gameObj.getChildAt(1).active = false;
            this.mainSceneObser.notice("gameOver");
            Laya.timer.once(2000, this, function () {
                var gameOver = Laya.stage.getChildAt(1).getChildAt(0).getChildAt(4);
                gameOver.visible = true;
            });
        }
    }, {
        key: "jumpUp",
        value: function jumpUp(obj, isShow) {
            this.manForceSet(this.restiSpeed); //反弹
            this.colliFlooreffect(obj, isShow);
        }
        //撞击地面特效

    }, {
        key: "colliFlooreffect",
        value: function colliFlooreffect(obj, isShow) {
            if (!isShow) return;
            this.landColliClone = this.CloneObj(this.landColliEft, obj, "landTexture");
            this.landColliClone.active = true;
            this.landColliClone.transform.position = this.gameObj.transform.position;
            this.landColliClone.transform.localPositionZ = obj.transform.localPositionZ + this.landOffest;
            if (!this.landColliClone.getComponent(_LandColliManager2.default)) {
                this.landColliClone.addComponent(_LandColliManager2.default);
            }
        }
        /**
         * 开启协程
         * @param {*} type: "Loop","once"
         * @param {*} interv:间隔(秒)
         * @param {*} caller:调用者
         * @param {*} callback:回调
         * @param {*} isRecover:是否覆盖协程默认true
         * @param {*} args:回调参数
         */

    }, {
        key: "startCoroutine",
        value: function startCoroutine(type, interv, caller, callback) {
            var isRecover = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;

            for (var _len = arguments.length, args = Array(_len > 5 ? _len - 5 : 0), _key = 5; _key < _len; _key++) {
                args[_key - 5] = arguments[_key];
            }

            if (type === "loop") {
                Laya.timer.loop(interv * 1000, caller, callback, [].concat(args), isRecover);
            }
            if (type === "once") {
                Laya.timer.once(interv * 1000, caller, callback, [].concat(args), isRecover);
            }
        }
    }, {
        key: "GetEquipment",
        value: function GetEquipment(type) {
            switch (type) {
                case _GameMainScene2.default.floorBarType.doubleMark:
                    this.equipment.doubleMark = 1;
                    Laya.stage.getChildAt(1).getChildAt(0).getChildAt(1).text = "双倍:" + this.equipment.doubleMark;
                    this.gameObj.meshRenderer.material.albedoTexture = Laya.loader.getRes("res/2X_qiuti.png");
                    this.startCoroutine("once", 3, this, this.MarkDis);
                    break;
                case _GameMainScene2.default.floorBarType.defence:
                    //get defence
                    this.equipment.defence = 1;
                    Laya.stage.getChildAt(1).getChildAt(0).getChildAt(2).text = "护盾:" + this.equipment.defence;
                    this.gameObj.meshRenderer.material.albedoTexture = Laya.loader.getRes("res/fudun_qiuti.png");
                    this.startCoroutine("once", 3, this, this.DefenceDis);
                    break;
                case _GameMainScene2.default.floorBarType.rocket:
                    //speed up
                    this.equipment.speeder = 1;
                    Laya.stage.getChildAt(1).getChildAt(0).getChildAt(3).text = "火箭:" + this.equipment.speeder;
                    this.gameObj.meshRenderer.material.albedoTexture = Laya.loader.getRes("res/huojian_qiuti.png");
                    this.startCoroutine("once", 1.5, this, this.RocketDis);
                    break;
                default:
                    break;
            }
        }
    }, {
        key: "MarkDis",
        value: function MarkDis() {
            this.equipment.doubleMark = 0;
            Laya.stage.getChildAt(1).getChildAt(0).getChildAt(1).text = "双倍:" + 0;
            this.gameObj.meshRenderer.material.albedoTexture = this.manTexture;
        }
    }, {
        key: "DefenceDis",
        value: function DefenceDis() {
            this.equipment.defence = 0;
            Laya.stage.getChildAt(1).getChildAt(0).getChildAt(2).text = "护盾:" + 0;
            this.gameObj.meshRenderer.material.albedoTexture = this.manTexture;
        }
    }, {
        key: "RocketDis",
        value: function RocketDis() {
            this.equipment.speeder = 0;
            Laya.stage.getChildAt(1).getChildAt(0).getChildAt(3).text = "火箭:" + 0;
            this.gameObj.meshRenderer.material.albedoTexture = this.manTexture;
        }
        //克隆物体

    }, {
        key: "CloneObj",
        value: function CloneObj(moudle, parent, name) {
            var clone = this.manPool.getItem(name);
            if (clone) {
                parent.addChild(clone);
            } else {
                clone = Laya.Sprite3D.instantiate(moudle, parent, false);
                clone.name = name;
            }
            clone.transform.position = moudle.transform.position;
            clone.transform.rotation = moudle.transform.rotation;

            return clone;
        }
    }]);

    return ManManager;
}(Laya.Script3D);

exports.default = ManManager;

},{"./FloorCreateManager":6,"./GameMainScene":8,"./GamePool":9,"./LandColliManager":11,"./Observer":13}],13:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Observer = function () {
    function Observer() {
        _classCallCheck(this, Observer);

        this._dictionary = {};
    }

    _createClass(Observer, [{
        key: "watch",
        value: function watch(key, func) {
            if (this._dictionary[key]) {
                if (this._dictionary[key] != func) {
                    this._dictionary[key].push(func);
                }
            } else {
                this._dictionary[key] = [];
                this._dictionary[key].push(func);
            }
        }
    }, {
        key: "notice",
        value: function notice(key) {
            for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                args[_key - 1] = arguments[_key];
            }

            for (var obj in this._dictionary[key]) {
                if (this._dictionary[key].hasOwnProperty(obj)) {
                    var _dictionary$key;

                    (_dictionary$key = this._dictionary[key])[obj].apply(_dictionary$key, args);
                }
            }
        }
    }, {
        key: "removeAllObserver",
        value: function removeAllObserver() {
            this._dictionary = {};
        }
    }, {
        key: "removeObserverByType",
        value: function removeObserverByType(type) {
            if (this._dictionary.hasKey(type)) {
                delete this._dictionary.type;
            }
        }
    }], [{
        key: "getInstance",
        value: function getInstance() {
            if (!this._instance) {
                this._instance = new Observer();
            }
            return this._instance;
        }
    }]);

    return Observer;
}();

exports.default = Observer;

},{}],14:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var CLASS$ = Laya.class;
var STATICATTR$ = Laya.static;
var View = laya.ui.View;
var Dialog = laya.ui.Dialog;
var Scene = Laya.Scene;
if (!window.ui) window.ui = {};
var TestSceneUI = function (_super) {
	function TestSceneUI() {

		TestSceneUI.__super.call(this);
	}
	CLASS$(TestSceneUI, 'ui.test.TestSceneUI', _super);
	var __proto__ = TestSceneUI.prototype;
	__proto__.createChildren = function () {
		_super.prototype.createChildren.call(this);
		this.loadScene("test/TestScene");
	};
	return TestSceneUI;
}(Scene);
exports.default = ui;

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xheWFFbmdpbmUvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcuanMiLCJzcmMvTWFpbi5qcyIsInNyYy9zY3JpcHQvQ2FtZXJhTWFuYWdlci5qcyIsInNyYy9zY3JpcHQvQ2FtZXJhVHJhbnNTZXQuanMiLCJzcmMvc2NyaXB0L0Zsb29yQmFyTWFuYWdlci5qcyIsInNyYy9zY3JpcHQvRmxvb3JDcmVhdGVNYW5hZ2VyLmpzIiwic3JjL3NjcmlwdC9GbG9vck1vdmVNYW5hZ2VyLmpzIiwic3JjL3NjcmlwdC9HYW1lTWFpblNjZW5lLmpzIiwic3JjL3NjcmlwdC9HYW1lUG9vbC5qcyIsInNyYy9zY3JpcHQvR2FtZVVJLmpzIiwic3JjL3NjcmlwdC9MYW5kQ29sbGlNYW5hZ2VyLmpzIiwic3JjL3NjcmlwdC9NYW5NYW5hZ2VyLmpzIiwic3JjL3NjcmlwdC9PYnNlcnZlci5qcyIsInNyYy91aS9sYXlhTWF4VUkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztxakJDVkE7OztBQUNBOzs7Ozs7OztJQUVxQixVOzs7Ozs7OytCQUNIO0FBQ1Y7QUFDQSxnQkFBSSxNQUFNLEtBQUssVUFBTCxDQUFnQixRQUExQjtBQUNOLGdCQUFJLGtCQUFKLEVBQXVCLGdCQUF2QjtBQUNHOzs7Ozs7a0JBTGdCLFU7O0FBT3JCLFdBQVcsS0FBWCxHQUFtQixHQUFuQjtBQUNBLFdBQVcsTUFBWCxHQUFvQixJQUFwQjtBQUNBLFdBQVcsU0FBWCxHQUFzQixZQUF0QjtBQUNBLFdBQVcsVUFBWCxHQUF3QixNQUF4QjtBQUNBLFdBQVcsTUFBWCxHQUFvQixLQUFwQjtBQUNBLFdBQVcsTUFBWCxHQUFvQixNQUFwQjtBQUNBLFdBQVcsVUFBWCxHQUF3QixzQkFBeEI7QUFDQSxXQUFXLFNBQVgs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SUFBcEIsQ0FBeUIsSUFBekI7QUFDQTtBQUNELFFBQU8sV0FBUCxFQUFtQixxQkFBbkIsRUFBeUMsTUFBekM7QUFDQSxLQUFJLFlBQVUsWUFBWSxTQUExQjtBQUNBLFdBQVUsY0FBVixHQUF5QixZQUFVO0FBQ2xDLFNBQU8sU0FBUCxDQUFpQixjQUFqQixDQUFnQyxJQUFoQyxDQUFxQyxJQUFyQztBQUNBLE9BQUssU0FBTCxDQUFlLGdCQUFmO0FBQ0EsRUFIRDtBQUlBLFFBQU8sV0FBUDtBQUNBLENBWmMsQ0FZWixLQVpZLENBQWhCO1FBYWMsTyxHQUFOLEUiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbmltcG9ydCBHYW1lVUkgZnJvbSBcIi4vc2NyaXB0L0dhbWVVSVwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29uZmlnIHtcclxuICAgIHN0YXRpYyBpbml0KCkge1xyXG4gICAgICAgIC8v5rOo5YaMU2NyaXB05oiW6ICFUnVudGltZeW8leeUqFxyXG4gICAgICAgIGxldCByZWcgPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcblx0XHRyZWcoXCJzY3JpcHQvR2FtZVVJLmpzXCIsR2FtZVVJKTtcclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLndpZHRoID0gNjQwO1xyXG5HYW1lQ29uZmlnLmhlaWdodCA9IDExMzY7XHJcbkdhbWVDb25maWcuc2NhbGVNb2RlID1cImZpeGVkd2lkdGhcIjtcclxuR2FtZUNvbmZpZy5zY3JlZW5Nb2RlID0gXCJub25lXCI7XHJcbkdhbWVDb25maWcuYWxpZ25WID0gXCJ0b3BcIjtcclxuR2FtZUNvbmZpZy5hbGlnbkggPSBcImxlZnRcIjtcclxuR2FtZUNvbmZpZy5zdGFydFNjZW5lID0gXCJ0ZXN0L1Rlc3RTY2VuZS5zY2VuZVwiO1xyXG5HYW1lQ29uZmlnLnNjZW5lUm9vdCA9IFwiXCI7XHJcbkdhbWVDb25maWcuZGVidWcgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5zdGF0ID0gZmFsc2U7XHJcbkdhbWVDb25maWcucGh5c2ljc0RlYnVnID0gZmFsc2U7XHJcbkdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb24gPSB0cnVlO1xyXG5cclxuR2FtZUNvbmZpZy5pbml0KCk7XHJcbiIsIu+7v2ltcG9ydCBHYW1lQ29uZmlnIGZyb20gXCIuL0dhbWVDb25maWdcIjtcclxuaW1wb3J0IHVpIGZyb20gXCIuL3VpL2xheWFNYXhVSVwiO1xyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdExheWEuc3RhZ2UuYWxpZ25WID0gR2FtZUNvbmZpZy5hbGlnblY7XHJcblx0XHRMYXlhLnN0YWdlLmFsaWduSCA9IEdhbWVDb25maWcuYWxpZ25IO1xyXG5cdFx0Ly/lhbzlrrnlvq7kv6HkuI3mlK/mjIHliqDovb1zY2VuZeWQjue8gOWcuuaZr1xyXG5cdFx0TGF5YS5VUkwuZXhwb3J0U2NlbmVUb0pzb24gPSBHYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uO1xyXG5cclxuXHRcdC8v5omT5byA6LCD6K+V6Z2i5p2/77yI6YCa6L+HSURF6K6+572u6LCD6K+V5qih5byP77yM5oiW6ICFdXJs5Zyw5Z2A5aKe5YqgZGVidWc9dHJ1ZeWPguaVsO+8jOWdh+WPr+aJk+W8gOiwg+ivlemdouadv++8iVxyXG5cdFx0aWYgKEdhbWVDb25maWcuZGVidWcgfHwgTGF5YS5VdGlscy5nZXRRdWVyeVN0cmluZyhcImRlYnVnXCIpID09IFwidHJ1ZVwiKSBMYXlhLmVuYWJsZURlYnVnUGFuZWwoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyAmJiBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXSkgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0uZW5hYmxlKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5zdGF0KSBMYXlhLlN0YXQuc2hvdygpO1xyXG5cdFx0TGF5YS5hbGVydEdsb2JhbEVycm9yID0gdHJ1ZTtcclxuXHJcblx0XHQvL+a/gOa0u+i1hOa6kOeJiOacrOaOp+WItu+8jHZlcnNpb24uanNvbueUsUlEReWPkeW4g+WKn+iDveiHquWKqOeUn+aIkO+8jOWmguaenOayoeacieS5n+S4jeW9seWTjeWQjue7rea1geeoi1xyXG5cdFx0TGF5YS5SZXNvdXJjZVZlcnNpb24uZW5hYmxlKFwidmVyc2lvbi5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vblZlcnNpb25Mb2FkZWQpLCBMYXlhLlJlc291cmNlVmVyc2lvbi5GSUxFTkFNRV9WRVJTSU9OKTtcclxuXHR9XHJcblxyXG5cdG9uVmVyc2lvbkxvYWRlZCgpIHtcclxuXHRcdC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XHJcblx0XHRMYXlhLkF0bGFzSW5mb01hbmFnZXIuZW5hYmxlKFwiZmlsZWNvbmZpZy5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkNvbmZpZ0xvYWRlZCkpO1xyXG5cdH1cclxuXHJcblx0b25Db25maWdMb2FkZWQoKSB7XHJcblx0XHQvL+WKoOi9vUlEReaMh+WumueahOWcuuaZr1xyXG5cdFx0R2FtZUNvbmZpZy5zdGFydFNjZW5lICYmIExheWEuU2NlbmUub3BlbihHYW1lQ29uZmlnLnN0YXJ0U2NlbmUpO1xyXG5cdH1cclxufVxyXG4vL+a/gOa0u+WQr+WKqOexu1xyXG5uZXcgTWFpbigpO1xyXG4iLCJpbXBvcnQgR2FtZU1haW5TY2VuZSBmcm9tIFwiLi9HYW1lTWFpblNjZW5lXCI7XG5pbXBvcnQgT2JzZXJ2ZXIgZnJvbSBcIi4vT2JzZXJ2ZXJcIjtcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYW1lcmFNYW5hZ2VyIGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuX3RlbXBWZWN0b3IzID0gbmV3IExheWEuVmVjdG9yMygpO1xuICAgICAgICB0aGlzLnlhd1BpdGNoUm9sbCA9IG5ldyBMYXlhLlZlY3RvcjMoKTtcbiAgICAgICAgdGhpcy5yZXN1bHRSb3RhdGlvbiA9IG5ldyBMYXlhLlF1YXRlcm5pb24oKTtcbiAgICAgICAgdGhpcy50ZW1wUm90YXRpb25aID0gbmV3IExheWEuUXVhdGVybmlvbigpO1xuICAgICAgICB0aGlzLnRlbXBSb3RhdGlvblggPSBuZXcgTGF5YS5RdWF0ZXJuaW9uKCk7XG4gICAgICAgIHRoaXMudGVtcFJvdGF0aW9uWSA9IG5ldyBMYXlhLlF1YXRlcm5pb24oKTtcbiAgICAgICAgdGhpcy5yb3RhaW9uU3BlZWQgPSAwLjAwMDA2O1xuICAgICAgICB0aGlzLmNhbWVyYURlYnVnID0gdHJ1ZTtcbiAgICAgICAgLy/op4Llr5/ogIVcbiAgICAgICAgdGhpcy5tYWluU2NlbmVPYnNlciA9IDA7XG4gICAgfVxuICAgIG9uQXdha2UoKSB7XG4gICAgICAgIHRoaXMuY2FtZXJhID0gdGhpcy5vd25lcjtcbiAgICAgICAgdGhpcy5tYWluU2NlbmVPYnNlciA9IHRoaXMuY2FtZXJhLnBhcmVudC5nZXRDb21wb25lbnQoR2FtZU1haW5TY2VuZSkubWFpbk9ic2VydmVyO1xuICAgICAgICBpZiAodGhpcy5jYW1lcmFEZWJ1Zykge1xuICAgICAgICAgICAgTGF5YS5zdGFnZS5vbihMYXlhLkV2ZW50LlJJR0hUX01PVVNFX0RPV04sIHRoaXMsIHRoaXMubW91c2VEb3duKTtcbiAgICAgICAgICAgIExheWEuc3RhZ2Uub24oTGF5YS5FdmVudC5SSUdIVF9NT1VTRV9VUCwgdGhpcywgdGhpcy5tb3VzZVVwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1haW5TY2VuZU9ic2VyLndhdGNoKFwiY2FtZXJhTW92ZVwiLCB0aGlzLnNldFBvc0FuZFJvdGF0aW9uLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBfb25EZXN0cm95KCkge1xuICAgICAgICAvL+WFs+mXreebkeWQrOWHveaVsFxuICAgICAgICBMYXlhLnN0YWdlLm9mZihMYXlhLkV2ZW50LlJJR0hUX01PVVNFX0RPV04sIHRoaXMsIHRoaXMubW91c2VEb3duKTtcbiAgICAgICAgTGF5YS5zdGFnZS5vZmYoTGF5YS5FdmVudC5SSUdIVF9NT1VTRV9VUCwgdGhpcywgdGhpcy5tb3VzZVVwKTtcbiAgICB9XG4gICAgb25VcGRhdGUoc3RhdGUpIHtcbiAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLmNhbWVyYURlYnVnKSByZXR1cm47XG4gICAgICAgIExheWEuS2V5Qm9hcmRNYW5hZ2VyLmhhc0tleURvd24oMzcpICYmIHRoaXMuc2hvd1Bvc0FuZFJvdGF0aW9uKG51bGwsMC4wMSxudWxsKTtcbiAgICAgICAgdmFyIGVsYXBzZWRUaW1lID0gTGF5YS50aW1lci5kZWx0YTtcbiAgICAgICAgaWYgKCFpc05hTih0aGlzLmxhc3RNb3VzZVgpICYmICFpc05hTih0aGlzLmxhc3RNb3VzZVkpICYmIHRoaXMuaXNNb3VzZURvd24pIHtcbiAgICAgICAgICAgIHZhciBzY2VuZSA9IHRoaXMub3duZXIuc2NlbmU7XG4gICAgICAgICAgICBMYXlhLktleUJvYXJkTWFuYWdlci5oYXNLZXlEb3duKDg3KSAmJiB0aGlzLm1vdmVGb3J3YXJkKC0wLjAxICogZWxhcHNlZFRpbWUpOy8vV1xuICAgICAgICAgICAgTGF5YS5LZXlCb2FyZE1hbmFnZXIuaGFzS2V5RG93big4MykgJiYgdGhpcy5tb3ZlRm9yd2FyZCgwLjAxICogZWxhcHNlZFRpbWUpOy8vU1xuICAgICAgICAgICAgTGF5YS5LZXlCb2FyZE1hbmFnZXIuaGFzS2V5RG93big2NSkgJiYgdGhpcy5tb3ZlUmlnaHQoLTAuMDEgKiBlbGFwc2VkVGltZSk7Ly9BXG4gICAgICAgICAgICBMYXlhLktleUJvYXJkTWFuYWdlci5oYXNLZXlEb3duKDY4KSAmJiB0aGlzLm1vdmVSaWdodCgwLjAxICogZWxhcHNlZFRpbWUpOy8vRFxuICAgICAgICAgICAgTGF5YS5LZXlCb2FyZE1hbmFnZXIuaGFzS2V5RG93big4MSkgJiYgdGhpcy5tb3ZlVmVydGljYWwoMC4wMSAqIGVsYXBzZWRUaW1lKTsvL1FcbiAgICAgICAgICAgIExheWEuS2V5Qm9hcmRNYW5hZ2VyLmhhc0tleURvd24oNjkpICYmIHRoaXMubW92ZVZlcnRpY2FsKC0wLjAxICogZWxhcHNlZFRpbWUpOy8vRVxuXG4gICAgICAgICAgICB2YXIgb2Zmc2V0WCA9IExheWEuc3RhZ2UubW91c2VYIC0gdGhpcy5sYXN0TW91c2VYO1xuICAgICAgICAgICAgdmFyIG9mZnNldFkgPSBMYXlhLnN0YWdlLm1vdXNlWSAtIHRoaXMubGFzdE1vdXNlWTtcblxuICAgICAgICAgICAgdmFyIHlwckVsZW0gPSB0aGlzLnlhd1BpdGNoUm9sbDtcbiAgICAgICAgICAgIHlwckVsZW0ueCAtPSBvZmZzZXRYICogdGhpcy5yb3RhaW9uU3BlZWQgKiBlbGFwc2VkVGltZTtcbiAgICAgICAgICAgIHlwckVsZW0ueSAtPSBvZmZzZXRZICogdGhpcy5yb3RhaW9uU3BlZWQgKiBlbGFwc2VkVGltZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUm90YXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RNb3VzZVggPSBMYXlhLnN0YWdlLm1vdXNlWDtcbiAgICAgICAgdGhpcy5sYXN0TW91c2VZID0gTGF5YS5zdGFnZS5tb3VzZVk7XG5cblxuICAgIH1cbiAgICBtb3VzZURvd24oZSkge1xuICAgICAgICBpZiAoIXRoaXMuY2FtZXJhRGVidWcpIHJldHVybjtcbiAgICAgICAgLy/ojrflvpfpvKDmoIfnmoTml4vovazlgLxcbiAgICAgICAgdGhpcy5jYW1lcmEudHJhbnNmb3JtLmxvY2FsUm90YXRpb24uZ2V0WWF3UGl0Y2hSb2xsKHRoaXMueWF3UGl0Y2hSb2xsKTtcbiAgICAgICAgLy/ojrflvpfpvKDmoIfnmoR4eeWAvFxuICAgICAgICB0aGlzLmxhc3RNb3VzZVggPSBMYXlhLnN0YWdlLm1vdXNlWDtcbiAgICAgICAgdGhpcy5sYXN0TW91c2VZID0gTGF5YS5zdGFnZS5tb3VzZVk7XG4gICAgICAgIC8v6K6+572uYm9vbOWAvFxuICAgICAgICB0aGlzLmlzTW91c2VEb3duID0gdHJ1ZTtcblxuICAgIH1cbiAgICBtb3VzZVVwKGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNhbWVyYURlYnVnKSByZXR1cm47XG4gICAgICAgIC8v6K6+572uYm9vbOWAvFxuICAgICAgICB0aGlzLmlzTW91c2VEb3duID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIOWQkeWJjeenu+WKqOOAglxuICAgICAqL1xuICAgIG1vdmVGb3J3YXJkKGRpc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuX3RlbXBWZWN0b3IzLnggPSAwO1xuICAgICAgICB0aGlzLl90ZW1wVmVjdG9yMy55ID0gMDtcbiAgICAgICAgdGhpcy5fdGVtcFZlY3RvcjMueiA9IGRpc3RhbmNlO1xuICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0udHJhbnNsYXRlKHRoaXMuX3RlbXBWZWN0b3IzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICog5ZCR5Y+z56e75Yqo44CCXG4gICAgICovXG4gICAgbW92ZVJpZ2h0KGRpc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuX3RlbXBWZWN0b3IzLnkgPSAwO1xuICAgICAgICB0aGlzLl90ZW1wVmVjdG9yMy56ID0gMDtcbiAgICAgICAgdGhpcy5fdGVtcFZlY3RvcjMueCA9IGRpc3RhbmNlO1xuICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0udHJhbnNsYXRlKHRoaXMuX3RlbXBWZWN0b3IzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICog5ZCR5LiK56e75Yqo44CCXG4gICAgICovXG4gICAgbW92ZVZlcnRpY2FsKGRpc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuX3RlbXBWZWN0b3IzLnggPSB0aGlzLl90ZW1wVmVjdG9yMy56ID0gMDtcbiAgICAgICAgdGhpcy5fdGVtcFZlY3RvcjMueSA9IGRpc3RhbmNlO1xuICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0udHJhbnNsYXRlKHRoaXMuX3RlbXBWZWN0b3IzLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgdXBkYXRlUm90YXRpb24oKSB7XG4gICAgICAgICAgICBMYXlhLlF1YXRlcm5pb24uY3JlYXRlRnJvbVlhd1BpdGNoUm9sbCh0aGlzLnlhd1BpdGNoUm9sbC54LCB0aGlzLnlhd1BpdGNoUm9sbC55LCB0aGlzLnlhd1BpdGNoUm9sbC56LCB0aGlzLnRlbXBSb3RhdGlvblopO1xuICAgICAgICAgICAgdGhpcy50ZW1wUm90YXRpb25aLmNsb25lVG8odGhpcy5jYW1lcmEudHJhbnNmb3JtLmxvY2FsUm90YXRpb24pO1xuICAgICAgICAgICAgdGhpcy5jYW1lcmEudHJhbnNmb3JtLmxvY2FsUm90YXRpb24gPSB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ubG9jYWxSb3RhdGlvbjtcbiAgICB9XG4gICAgc2hvd1Bvc0FuZFJvdGF0aW9uKCkge1xuICAgICAgICBjb25zb2xlLmxvZyhcImluZm9ybWF0aW9uOlBvc2l0aW9uXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNhbWVyYS50cmFuc2Zvcm0ucG9zaXRpb24pO1xuICAgICAgICBjb25zb2xlLmxvZyhcImluZm9ybWF0aW9uOlJvdGF0aW9uXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmNhbWVyYS50cmFuc2Zvcm0ucm90YXRpb24pO1xuICAgIH1cbiAgICBzZXRQb3NBbmRSb3RhdGlvbihpc0luaXQsIHBvcywgcm90YXRpb24pIHtcbiAgICAgICAgaWYgKHBvcykge1xuICAgICAgICAgICAgdmFyIHBvc0luZm8gPSB7XG4gICAgICAgICAgICAgICAgY3VyUG9zOiB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ucG9zaXRpb24sXG4gICAgICAgICAgICAgICAgY2hhbmdlUG9zOiBwb3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0luaXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ucG9zaXRpb24gPSBwb3NJbmZvLmNoYW5nZVBvcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBmaW5hbFBvcz1uZXcgTGF5YS5WZWN0b3IzKDAsMCwwKTtcbiAgICAgICAgICAgICAgICBMYXlhLlZlY3RvcjMuYWRkKHBvc0luZm8uY3VyUG9zLHBvc0luZm8uY2hhbmdlUG9zLGZpbmFsUG9zKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvbiA9ZmluYWxQb3M7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvdGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgcm90YXRpb25JbmZvID0ge1xuICAgICAgICAgICAgICAgIGN1clJvdGF0aW9uOiB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ucm90YXRpb24sXG4gICAgICAgICAgICAgICAgY2hhbmdlUm90YXRpb246IHJvdGF0aW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNJbml0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEudHJhbnNmb3JtLnJvdGF0aW9uID0gcm90YXRpb25JbmZvLmNoYW5nZVJvdGF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGZpbmFsUm90YXRpb249bmV3IExheWEuVmVjdG9yNCgwLDAsMCwwKTtcbiAgICAgICAgICAgICAgICBMYXlhLlZlY3RvcjQuYWRkKHJvdGF0aW9uSW5mby5jaGFuZ2VSb3RhdGlvbixyb3RhdGlvbkluZm8uY3VyUm90YXRpb24sZmluYWxSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEudHJhbnNmb3JtLnJvdGF0aW9uID0gZmluYWxSb3RhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfVxuICAgIHVwZGF0ZVJvdGF0ZShrLGIseikge1xuICAgICAgICBpZihrJiZiKXtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhLnRyYW5zZm9ybS5yb3RhdGUobmV3IExheWEuVmVjdG9yMyhrLCAwLCBiKSlcbiAgICAgICAgfVxuICAgICAgIGlmKHope1xuICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ucm90YXRlKG5ldyBMYXlhLlZlY3RvcjMoMCwgeiwgMCkpXG4gICAgICAgfVxuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYW1lcmFUcmFuc1NldCBleHRlbmRzIExheWEuU2NyaXB0M0Qge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgLy8gdGhpcy5zdGFydFBvcyA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgLTUuMTUsIC0xLjE5KTtcclxuICAgICAgICAvLyB0aGlzLnN0YXJ0Um90YXRpb24gPSBuZXcgTGF5YS5WZWN0b3I0KDAuMDMzOTczNjUwNjMzMzI0NTYsIC0wLjAyMDYyMjM4MjY0Mjg4ODQsIC0wLjg1NDE2MjExOTg0MzU3MywgLTAuNTE4NDg1ODU0NjAwNzg3Mik7XHJcblxyXG4gICAgfVxyXG4gICAgb25Bd2FrZSgpIHtcclxuICAgICAgICB0aGlzLmNhbWVyYSA9IHRoaXMub3duZXI7XHJcbiAgICAgICAgLy8gIHRoaXMuc2V0UG9zQW5kUm90YXRpb24odHJ1ZSwgdGhpcy5zdGFydFBvcywgdGhpcy5zdGFydFJvdGF0aW9uKTtcclxuICAgIH1cclxuICAgIHNldFBvc0FuZFJvdGF0aW9uKGlzSW5pdCwgcG9zLCByb3RhdGlvbiwgcm90YXRlKSB7XHJcbiAgICAgICAgaWYgKHBvcykge1xyXG4gICAgICAgICAgICB2YXIgcG9zSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIGN1clBvczogdGhpcy5jYW1lcmEudHJhbnNmb3JtLnBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlUG9zOiBwb3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaXNJbml0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ucG9zaXRpb24gPSBwb3NJbmZvLmNoYW5nZVBvcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBmaW5hbFBvcyA9IG5ldyBMYXlhLlZlY3RvcjMoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICBMYXlhLlZlY3RvcjMuYWRkKHBvc0luZm8uY3VyUG9zLCBwb3NJbmZvLmNoYW5nZVBvcywgZmluYWxQb3MpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEudHJhbnNmb3JtLnBvc2l0aW9uID0gZmluYWxQb3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJvdGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciByb3RhdGlvbkluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICBjdXJSb3RhdGlvbjogdGhpcy5jYW1lcmEudHJhbnNmb3JtLnJvdGF0aW9uLFxyXG4gICAgICAgICAgICAgICAgY2hhbmdlUm90YXRpb246IHJvdGF0aW9uXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlzSW5pdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEudHJhbnNmb3JtLnJvdGF0aW9uID0gcm90YXRpb25JbmZvLmNoYW5nZVJvdGF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbmFsUm90YXRpb24gPSBuZXcgTGF5YS5WZWN0b3I0KDAsIDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgTGF5YS5WZWN0b3I0LmFkZChyb3RhdGlvbkluZm8uY2hhbmdlUm90YXRpb24sIHJvdGF0aW9uSW5mby5jdXJSb3RhdGlvbiwgZmluYWxSb3RhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ucm90YXRpb24gPSBmaW5hbFJvdGF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyb3RhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW1lcmEudHJhbnNmb3JtLnJvdGF0ZShyb3RhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG59IiwiaW1wb3J0IEdhbWVNYWluU2NlbmUgZnJvbSBcIi4vR2FtZU1haW5TY2VuZVwiO1xyXG5pbXBvcnQgR2FtZVBvb2wgZnJvbSBcIi4vR2FtZVBvb2xcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZsb29yQmFyTWFuYWdlciBleHRlbmRzIExheWEuU2NyaXB0M0Qge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgLy/orr7lrprpgJ/luqZcclxuICAgICAgICB0aGlzLnJvdGF0aW9uRGF0YSA9IDA7XHJcbiAgICAgICAgdGhpcy5yb3RhdGVWZWMgPSBMYXlhLlZlY3RvcjMuWkVSTztcclxuICAgICAgICB0aGlzLnRpbWVJbnRlcnYgPSAwO1xyXG4gICAgICAgIHRoaXMucm90YXRpb25TcGVlZCA9IDAuNztcclxuICAgICAgICB0aGlzLmZsYWcgPSBmYWxzZTtcclxuICAgICAgICAvL29ic2VyXHJcbiAgICAgICAgdGhpcy5tYWluU2NlbmVPYnNlciA9IDA7XHJcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2UgPSBmYWxzZTtcclxuICAgICAgICAvL3Bvb2xcclxuICAgICAgICB0aGlzLmZsb29yQmFyUG9vbCA9IDA7XHJcbiAgICAgICAgdGhpcy5mbG9vclJlY3ljbGUgPSAyO1xyXG4gICAgICAgIHRoaXMudHJhbnMgPSB7IHBvczogMCwgcm90OiAwIH1cclxuXHJcbiAgICB9XHJcbiAgICBvbkF3YWtlKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iaiA9IHRoaXMub3duZXI7XHJcbiAgICB9XHJcbiAgICBvblN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMubWFpblNjZW5lT2JzZXIud2F0Y2goXCJnYW1lT3ZlclwiLCB0aGlzLmRpc1Bvc2UuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5tYWluU2NlbmVPYnNlci53YXRjaChcInJlY3ljbGVcIiwgdGhpcy5yZWN5Y2xlT2JqLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMudHJhbnMucG9zID0gdGhpcy5nYW1lT2JqLnRyYW5zZm9ybS5wb3NpdGlvbjtcclxuICAgICAgICB0aGlzLnRyYW5zLnJvdCA9IHRoaXMuZ2FtZU9iai50cmFuc2Zvcm0ucm90YXRpb247XHJcbiAgICB9XHJcbiAgICBvbkVuYWJsZSgpIHtcclxuICAgICAgICB0aGlzLnRpbWVJbnRlcnYgPSAwO1xyXG4gICAgICAgIGlmICh0aGlzLmdhbWVPYmouZ2V0Q2hpbGRBdCgwKSkge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVPYmouZ2V0Q2hpbGRBdCgwKS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvblVwZGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2UpIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5nYW1lT2JqLm5hbWUgPT09IEdhbWVNYWluU2NlbmUuZmxvb3JCYXJUeXBlLmFibm9ybWFsICYmIHRoaXMucm90YXRpb25EYXRhICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGltZUludGVydiArPSB0aGlzLnJvdGF0aW9uU3BlZWQ7XHJcbiAgICAgICAgICAgIHRoaXMucm90YXRlVmVjLnNldFZhbHVlKDAsIDAsIHRoaXMucm90YXRpb25TcGVlZCAqICh0aGlzLmZsYWcgPyAxIDogLTEpKTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lT2JqLnRyYW5zZm9ybS5yb3RhdGUodGhpcy5yb3RhdGVWZWMsIHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMudGltZUludGVydiA+IHRoaXMucm90YXRpb25EYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVJbnRlcnYgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mbGFnID0gIXRoaXMuZmxhZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRGlzYWJsZSgpIHtcclxuICAgICAgICB0aGlzLmdhbWVPYmoudHJhbnNmb3JtLnBvc2l0aW9uID0gdGhpcy50cmFucy5wb3M7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqLnRyYW5zZm9ybS5yb3RhdGlvbiA9IHRoaXMudHJhbnMucm90O1xyXG4gICAgfVxyXG5cclxuICAgIGRpc1Bvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2UgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmVjeWNsZU9iaihjdXJGbG9vckluZGV4KSB7XHJcbiAgICAgICAgaWYgKGN1ckZsb29ySW5kZXggLSB0aGlzLmZsb29yUmVjeWNsZSA+PSAwKSB7XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHRoaXMuZ2FtZU9iai5wYXJlbnQucGFyZW50LnBhcmVudC5nZXRDaGlsZEluZGV4KHRoaXMuZ2FtZU9iai5wYXJlbnQucGFyZW50KTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID09IGN1ckZsb29ySW5kZXggLSB0aGlzLmZsb29yUmVjeWNsZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2FtZU9iai5uYW1lID09IEdhbWVNYWluU2NlbmUuZmxvb3JCYXJUeXBlLmFibm9ybWFsIHx8IHRoaXMuZ2FtZU9iai5uYW1lID09XHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZU1haW5TY2VuZS5mbG9vckJhclR5cGUubm9ybWFsKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmxvb3JCYXJQb29sLnB1dEl0ZW0odGhpcy5nYW1lT2JqLm5hbWUsIHRoaXMuZ2FtZU9iaik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgR2FtZU1haW5TY2VuZSBmcm9tIFwiLi9HYW1lTWFpblNjZW5lXCI7XHJcbmltcG9ydCBGbG9vckJhck1hbmFnZXIgZnJvbSBcIi4vRmxvb3JCYXJNYW5hZ2VyXCI7XHJcbmltcG9ydCBHYW1lUG9vbCBmcm9tIFwiLi9HYW1lUG9vbFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRmxvb3JDcmVhdGVNYW5hZ2VyIGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIC8v6KeC5a+f6ICFXHJcbiAgICAgICAgdGhpcy5tYWluU2NlbmVPYnNlciA9IDA7XHJcbiAgICAgICAgLy/lr7nosaHmsaBcclxuICAgICAgICB0aGlzLmZsb29yQmFyUG9vbCA9IEdhbWVQb29sLmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgLy/pooTliLbkvZPmlbDnu4RcclxuICAgICAgICB0aGlzLnByZWZhYkFyciA9IDA7XHJcbiAgICAgICAgLy/kuIDmrKHmgKfnlJ/kuqdGbG9vcuWxguaVsFxyXG4gICAgICAgIHRoaXMuY3JlYXRMYXllciA9IDQ7XHJcbiAgICAgICAgLy/mr4/lsYLkuYvpl7TnmoTpl7TpmpR55YC8XHJcbiAgICAgICAgdGhpcy5GbG9vckludGVydiA9IDU7Ly84XHJcbiAgICAgICAgdGhpcy5jdXJGbG9vckxheWVySW5kZXggPSAwOy8vXHJcbiAgICAgICAgdGhpcy5zaW5nbGVGbG9vclBvcyA9IExheWEuVmVjdG9yMy5aRVJPO1xyXG4gICAgICAgIC8vIOijheWkh1xyXG4gICAgICAgIHRoaXMuZXF1aXBBcnIgPSAwO1xyXG4gICAgICAgIHRoaXMuc3BhY2VBcnIgPSAwO1xyXG4gICAgICAgIC8v6Z2Z5q2i6Zqc56KN5Z2XXHJcbiAgICAgICAgdGhpcy5zdGlsbFJpc2tNYXQgPSBuZXcgTGF5YS5QQlJTdGFuZGFyZE1hdGVyaWFsKCk7XHJcbiAgICAgICAgdGhpcy5ub3JtYWxNYXQgPSBuZXcgTGF5YS5QQlJTdGFuZGFyZE1hdGVyaWFsKCk7XHJcbiAgICAgICAgdGhpcy5zdGlsbFJpc2tTY2FsZSA9IG5ldyBMYXlhLlZlY3RvcjMoMS4wMSwgMS4wMSwgMS4wMSk7XHJcbiAgICAgICAgLy/np7vliqjpmpznoo1cclxuICAgICAgICB0aGlzLm1vdmVSaXNrU2NhbGUgPSBuZXcgTGF5YS5WZWN0b3IzKDEuMDA1LCAxLjAwNSwgMS4wMDUpO1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgdGhpcy5lcXVpcFN0YXJSb3RhdGlvbiA9IG5ldyBMYXlhLlZlY3RvcjQoMCwgMCwgMCwgLTEpO1xyXG4gICAgfVxyXG4gICAgb25Bd2FrZSgpIHtcclxuICAgICAgICB0aGlzLmdhbWVPYmogPSB0aGlzLm93bmVyO1xyXG4gICAgICAgIHRoaXMubWFpblNjZW5lT2JzZXIgPSB0aGlzLmdhbWVPYmoucGFyZW50LmdldENvbXBvbmVudChHYW1lTWFpblNjZW5lKS5tYWluT2JzZXJ2ZXI7XHJcbiAgICAgICAgdGhpcy5tYWluU2NlbmVPYnNlci53YXRjaChcImNyZWF0Rmxvb3JcIiwgdGhpcy5mbG9vckluaXQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5zdGlsbFJpc2tNYXQuYWxiZWRvQ29sb3IgPSBuZXcgTGF5YS5WZWN0b3I0KDEsIDAsIDAsIDEpOy8v57qi6ImyXHJcbiAgICB9XHJcbiAgICBvblN0YXJ0KCkge1xyXG4gICAgICAgIC8v6ZqQ6JeP6aKE5Yi25L2TXHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5wcmVmYWJBcnIpIHtcclxuICAgICAgICAgICAgdGhpcy5wcmVmYWJBcnJba2V5XS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lcXVpcEFyciA9IHRoaXMucHJlZmFiQXJyLmNvbmNhdCgpO1xyXG4gICAgICAgIHRoaXMuZXF1aXBBcnIuc3BsaWNlKDAsIDEpO1xyXG4gICAgICAgIHRoaXMuZmxvb3JJbml0KHRoaXMuY3JlYXRMYXllcik7XHJcbiAgICB9XHJcbiAgICAvL+WIneWni+WMllxyXG4gICAgZmxvb3JJbml0KG51bSkge1xyXG4gICAgICAgIC8v5b2T5YmN5bGC5pWwXHJcbiAgICAgICAgbGV0IGZsb29ySW5kZXggPSAwO1xyXG4gICAgICAgIHdoaWxlIChmbG9vckluZGV4IDwgbnVtKSB7XHJcbiAgICAgICAgICAgIC8v5LiA5bGC55qE5oC7Rmxvb3JcclxuICAgICAgICAgICAgbGV0IHNpbmdsZUZsb29yID0gbmV3IExheWEuU3ByaXRlM0QoKTtcclxuICAgICAgICAgICAgbGV0IHJhbmRvbURhdGEgPSB0aGlzLmdldFJhbmRvbURhdGEoKTsvL+iOt+WPlueahGpzb27mlbDmja5cclxuICAgICAgICAgICAgbGV0IGJhc2VCbG9jayA9IHRoaXMuY3JlYXRlQmFzZUJsb2NrKHJhbmRvbURhdGEpO1xyXG4gICAgICAgICAgICBsZXQgc3BCbG9jayA9IHRoaXMuY3JlYXRTUEJsb2NrKHJhbmRvbURhdGEpO1xyXG4gICAgICAgICAgICBzaW5nbGVGbG9vci5hZGRDaGlsZChiYXNlQmxvY2spO1xyXG4gICAgICAgICAgICBzaW5nbGVGbG9vci5hZGRDaGlsZChzcEJsb2NrKTtcclxuICAgICAgICAgICAgdGhpcy5zaW5nbGVGbG9vclBvcy5zZXRWYWx1ZSgwLCAtdGhpcy5jdXJGbG9vckxheWVySW5kZXggKiB0aGlzLkZsb29ySW50ZXJ2LCAwKTtcclxuICAgICAgICAgICAgc2luZ2xlRmxvb3IudHJhbnNmb3JtLnRyYW5zbGF0ZSh0aGlzLnNpbmdsZUZsb29yUG9zLCB0cnVlKTtcclxuICAgICAgICAgICAgZmxvb3JJbmRleCsrO1xyXG4gICAgICAgICAgICB0aGlzLmN1ckZsb29yTGF5ZXJJbmRleCsrO1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVPYmouYWRkQ2hpbGQoc2luZ2xlRmxvb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKuiOt+WPlumaj+acuuaVsOaNriAqL1xyXG4gICAgZ2V0UmFuZG9tRGF0YSgpIHtcclxuICAgICAgICBsZXQganNvbkRhdGEgPSBMYXlhLmxvYWRlci5nZXRSZXMoXCJyZXMvS0hYTS5qc29uXCIpO1xyXG4gICAgICAgIGxldCBqc29uQXJyID0gT2JqZWN0LmtleXMoanNvbkRhdGEpLm1hcChrZXkgPT4ganNvbkRhdGFba2V5XSk7XHJcbiAgICAgICAgbGV0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICoganNvbkFyci5sZW5ndGgpO1xyXG4gICAgICAgIHJldHVybiBqc29uQXJyW3JhbmRvbUluZGV4XTtcclxuICAgIH1cclxuICAgIGNyZWF0ZUJhc2VCbG9jayhyYW5kb21EYXRhKSB7XHJcbiAgICAgICAgbGV0IGJhc2VCbG9ja09ianMgPSBuZXcgTGF5YS5TcHJpdGUzRCgpO1xyXG4gICAgICAgIHRoaXMuc3BhY2VBcnIgPSBbXTtcclxuICAgICAgICBsZXQgZmxvb3JDbG9uZTtcclxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJhbmRvbURhdGEuYmFzZV9ibG9jay5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBsZXQgb2JqID0gcmFuZG9tRGF0YS5iYXNlX2Jsb2NrW2pdO1xyXG4gICAgICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICBmbG9vckNsb25lID0gdGhpcy5DbG9uZU9iaih0aGlzLnByZWZhYkFyclswXSwgYmFzZUJsb2NrT2JqcywgR2FtZU1haW5TY2VuZS5mbG9vckJhclR5cGUubm9ybWFsKTtcclxuICAgICAgICAgICAgICAgIGlmICghZmxvb3JDbG9uZS5nZXRDb21wb25lbnQoRmxvb3JCYXJNYW5hZ2VyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb29yQ2xvbmUuYWRkQ29tcG9uZW50KEZsb29yQmFyTWFuYWdlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvb3JDbG9uZS5nZXRDb21wb25lbnQoRmxvb3JCYXJNYW5hZ2VyKS5tYWluU2NlbmVPYnNlciA9IHRoaXMubWFpblNjZW5lT2JzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvb3JDbG9uZS5nZXRDb21wb25lbnQoRmxvb3JCYXJNYW5hZ2VyKS5mbG9vckJhclBvb2wgPSB0aGlzLmZsb29yQmFyUG9vbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZsb29yQ2xvbmUubWVzaFJlbmRlcmVyLm1hdGVyaWFsID0gdGhpcy5ub3JtYWxNYXQ7XHJcbiAgICAgICAgICAgICAgICBpZiAob2JqID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvb3JDbG9uZS5uYW1lID0gR2FtZU1haW5TY2VuZS5mbG9vckJhclR5cGUuc3RpbGxPYnN0YWNsZTtcclxuICAgICAgICAgICAgICAgICAgICAvL2Zsb29yQ2xvbmXmnZDotKjorr7nva5cclxuICAgICAgICAgICAgICAgICAgICBmbG9vckNsb25lLm1lc2hSZW5kZXJlci5tYXRlcmlhbCA9IHRoaXMuc3RpbGxSaXNrTWF0O1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb29yQ2xvbmUudHJhbnNmb3JtLmxvY2FsU2NhbGUgPSB0aGlzLnN0aWxsUmlza1NjYWxlO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v5Y+N6L2sLy90b2RvXHJcbiAgICAgICAgICAgICAgICAvL+S9jee9ruiwg+aVtFxyXG4gICAgICAgICAgICAgICAgZmxvb3JDbG9uZS50cmFuc2Zvcm0ucm90YXRlKG5ldyBMYXlhLlZlY3RvcjMoMCwgMCwgKGogKiAyMi41KSksIHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGZsb29yQ2xvbmUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3BhY2VBcnIucHVzaChqKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvL+maj+acuua3u+WKoOmBk+WFt1xyXG4gICAgICAgIGlmICh0aGlzLmNyZWF0RXF1aXBDaGFuY2UoMSkpIHsvL+avj+S4gOWxguWHuueOsOmBk+WFt+eahOWHoOeOh1xyXG4gICAgICAgICAgICBsZXQgcmFuRXF1aXAgPSB0aGlzLnJhbkVsZW1lbnQodGhpcy5lcXVpcEFycik7XHJcbiAgICAgICAgICAgIGxldCBlcXVpcENsb25lID0gdGhpcy5DbG9uZU9iaihyYW5FcXVpcCwgYmFzZUJsb2NrT2JqcywgcmFuRXF1aXAubmFtZSk7XHJcbiAgICAgICAgICAgIC8v6ZqP5py65L2N572uXHJcbiAgICAgICAgICAgIGxldCByYW5kb21Qb3MgPSB0aGlzLnJhbkVsZW1lbnQodGhpcy5zcGFjZUFycik7XHJcbiAgICAgICAgICAgIGVxdWlwQ2xvbmUudHJhbnNmb3JtLnJvdGF0ZShuZXcgTGF5YS5WZWN0b3IzKDAsICgocmFuZG9tUG9zKSAqIDIyLjUpLCAwKSwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICBlcXVpcENsb25lLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBiYXNlQmxvY2tPYmpzO1xyXG4gICAgfVxyXG4gICAgY3JlYXRTUEJsb2NrKHJhbmRvbURhdGEpIHtcclxuICAgICAgICBsZXQgc3BCbG9ja09ianMgPSBuZXcgTGF5YS5TcHJpdGUzRCgpO1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcmFuZG9tRGF0YS5zcF9ibG9ja19zaXplLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGxldCBvYmogPSByYW5kb21EYXRhLnNwX2Jsb2NrX3NpemVbal07XHJcbiAgICAgICAgICAgIGlmIChvYmopIHtcclxuICAgICAgICAgICAgICAgIGxldCBudW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG51bSA8IG9iaikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmbG9vckNsb25lID0gdGhpcy5DbG9uZU9iaih0aGlzLnByZWZhYkFyclswXSwgc3BCbG9ja09ianMsIEdhbWVNYWluU2NlbmUuZmxvb3JCYXJUeXBlLmFibm9ybWFsKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZsb29yQ2xvbmUuZ2V0Q29tcG9uZW50KEZsb29yQmFyTWFuYWdlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3JDbG9uZS5hZGRDb21wb25lbnQoRmxvb3JCYXJNYW5hZ2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3JDbG9uZS5nZXRDb21wb25lbnQoRmxvb3JCYXJNYW5hZ2VyKS5tYWluU2NlbmVPYnNlciA9IHRoaXMubWFpblNjZW5lT2JzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsb29yQ2xvbmUuZ2V0Q29tcG9uZW50KEZsb29yQmFyTWFuYWdlcikuZmxvb3JCYXJQb29sID0gdGhpcy5mbG9vckJhclBvb2w7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5re75Yqg5qCH562+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsb29yQ2xvbmUubmFtZSA9IEdhbWVNYWluU2NlbmUuZmxvb3JCYXJUeXBlLmFibm9ybWFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2Zsb29yQ2xvbmXmnZDotKjorr7nva5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3JDbG9uZS5tZXNoUmVuZGVyZXIubWF0ZXJpYWwgPSB0aGlzLnN0aWxsUmlza01hdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3JDbG9uZS50cmFuc2Zvcm0ubG9jYWxTY2FsZSA9IHRoaXMubW92ZVJpc2tTY2FsZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy/pgJ/luqZcclxuICAgICAgICAgICAgICAgICAgICBmbG9vckNsb25lLmdldENvbXBvbmVudChGbG9vckJhck1hbmFnZXIpLnJvdGF0aW9uRGF0YSA9IHJhbmRvbURhdGEuc3BfYmxvY2tfbW92ZV9zcGVlZFtqXTtcclxuICAgICAgICAgICAgICAgICAgICAvL+i1t+Wni+S9jee9rlxyXG4gICAgICAgICAgICAgICAgICAgIGZsb29yQ2xvbmUudHJhbnNmb3JtLnJvdGF0ZShuZXcgTGF5YS5WZWN0b3IzKDAsIDAsIChudW0gKiAyMi41KSArIHJhbmRvbURhdGEuc3BfYmxvY2tfc3RhcnRfcG9zW2pdICogMjIuNSksIHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAvL+WPjei9rCB0b2RvXHJcbiAgICAgICAgICAgICAgICAgICAgZmxvb3JDbG9uZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIG51bSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzcEJsb2NrT2JqcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBDbG9uZU9iaihtb3VkbGUsIHBhcmVudCwgbmFtZSwgZG9UcmFucyA9IHRydWUpIHtcclxuICAgICAgICBsZXQgY2xvbmUgPSB0aGlzLmZsb29yQmFyUG9vbC5nZXRJdGVtKG5hbWUpO1xyXG4gICAgICAgIGlmIChjbG9uZSkge1xyXG4gICAgICAgICAgICAvLyBpZiAoIXBhcmVudC5nZXRDaGlsZEJ5TmFtZShjbG9uZS5uYW1lKSkge1xyXG4gICAgICAgICAgICBwYXJlbnQuYWRkQ2hpbGQoY2xvbmUpO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNsb25lID0gTGF5YS5TcHJpdGUzRC5pbnN0YW50aWF0ZShtb3VkbGUsIHBhcmVudCwgZmFsc2UpO1xyXG4gICAgICAgICAgICBjbG9uZS5uYW1lID0gbmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRvVHJhbnMpIHtcclxuICAgICAgICAgICAgY2xvbmUudHJhbnNmb3JtLnBvc2l0aW9uID0gbW91ZGxlLnRyYW5zZm9ybS5wb3NpdGlvbjtcclxuICAgICAgICAgICAgY2xvbmUudHJhbnNmb3JtLnJvdGF0aW9uID0gbW91ZGxlLnRyYW5zZm9ybS5yb3RhdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjbG9uZTtcclxuICAgIH1cclxuICAgIHJhbkVsZW1lbnQoYXJyKSB7XHJcbiAgICAgICAgbGV0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyLmxlbmd0aCk7XHJcbiAgICAgICAgcmV0dXJuIGFycltyYW5kb21JbmRleF07XHJcbiAgICB9XHJcbiAgICAvL2V1cWlwIGNyZWF0IHByb2JhYmlsaXR5XHJcbiAgICBjcmVhdEVxdWlwQ2hhbmNlKHBybykge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnJhbmRvbSgpIDwgcHJvO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IEdhbWVNYWluU2NlbmUgZnJvbSBcIi4vR2FtZU1haW5TY2VuZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGbG9vck1vdmVNYW5hZ2VyIGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMueWF3UGl0Y2hSb2xsID0gbmV3IExheWEuVmVjdG9yMygpO1xuICAgICAgICB0aGlzLnRlbXBSb3RhdGlvblogPSBuZXcgTGF5YS5RdWF0ZXJuaW9uKCk7XG4gICAgICAgIHRoaXMucm90YWlvblNwZWVkID0gMC4wMDA1O1xuICAgICAgICAvL29ic2VyXG4gICAgICAgIHRoaXMubWFpblNjZW5lT2JzZXIgPSAwO1xuICAgICAgICB0aGlzLmlzRGlzcG9zZSA9IGZhbHNlO1xuICAgIH1cbiAgICBvbkF3YWtlKCkge1xuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuTU9VU0VfRE9XTiwgdGhpcywgdGhpcy5tb3VzZURvd24pO1xuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuTU9VU0VfVVAsIHRoaXMsIHRoaXMubW91c2VVcCk7XG4gICAgICAgIHRoaXMuZ2FtZU9iaiA9IHRoaXMub3duZXI7XG4gICAgICAgIHRoaXMubWFpblNjZW5lT2JzZXIgPSB0aGlzLmdhbWVPYmoucGFyZW50LmdldENvbXBvbmVudChHYW1lTWFpblNjZW5lKS5tYWluT2JzZXJ2ZXI7XG4gICAgICAgIHRoaXMubWFpblNjZW5lT2JzZXIud2F0Y2goXCJnYW1lT3ZlclwiLCB0aGlzLmRpc1Bvc2UuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIF9vbkRlc3Ryb3koKSB7XG4gICAgICAgIC8v5YWz6Zet55uR5ZCs5Ye95pWwXG4gICAgICAgIExheWEuc3RhZ2Uub2ZmKExheWEuRXZlbnQuTU9VU0VfRE9XTiwgdGhpcywgdGhpcy5tb3VzZURvd24pO1xuICAgICAgICBMYXlhLnN0YWdlLm9mZihMYXlhLkV2ZW50Lk1PVVNFX1VQLCB0aGlzLCB0aGlzLm1vdXNlVXApO1xuICAgIH1cbiAgICBvblVwZGF0ZShzdGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5pc0Rpc3Bvc2UpIHJldHVybjtcbiAgICAgICAgbGV0IGVsYXBzZWRUaW1lID0gTGF5YS50aW1lci5kZWx0YTtcbiAgICAgICAgaWYgKCFpc05hTih0aGlzLmxhc3RNb3VzZVgpICYmIHRoaXMuaXNNb3VzZURvd24pIHtcbiAgICAgICAgICAgIGxldCBvZmZzZXRYID0gTGF5YS5zdGFnZS5tb3VzZVggLSB0aGlzLmxhc3RNb3VzZVg7XG4gICAgICAgICAgICBsZXQgeXByRWxlbSA9IHRoaXMueWF3UGl0Y2hSb2xsO1xuICAgICAgICAgICAgeXByRWxlbS54ICs9IG9mZnNldFggKiB0aGlzLnJvdGFpb25TcGVlZCAqIGVsYXBzZWRUaW1lO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVSb3RhdGUob2Zmc2V0WCAqIHRoaXMucm90YWlvblNwZWVkICogZWxhcHNlZFRpbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdE1vdXNlWCA9IExheWEuc3RhZ2UubW91c2VYO1xuICAgIH1cbiAgICBtb3VzZURvd24oZSkge1xuICAgICAgICAvL+iOt+W+l+m8oOagh+eahOaXi+i9rOWAvFxuICAgICAgICB0aGlzLmdhbWVPYmoudHJhbnNmb3JtLmxvY2FsUm90YXRpb24uZ2V0WWF3UGl0Y2hSb2xsKHRoaXMueWF3UGl0Y2hSb2xsKTtcbiAgICAgICAgLy/ojrflvpfpvKDmoIfnmoR45YC8XG4gICAgICAgIHRoaXMubGFzdE1vdXNlWCA9IExheWEuc3RhZ2UubW91c2VYO1xuICAgICAgICAvL+iuvue9rmJvb2zlgLxcbiAgICAgICAgdGhpcy5pc01vdXNlRG93biA9IHRydWU7XG5cbiAgICB9XG4gICAgbW91c2VVcChlKSB7XG4gICAgICAgIC8v6K6+572uYm9vbOWAvFxuICAgICAgICB0aGlzLmlzTW91c2VEb3duID0gZmFsc2U7XG4gICAgfVxuICAgIHVwZGF0ZVJvdGF0ZShrKSB7XG4gICAgICAgIHRoaXMuZ2FtZU9iai50cmFuc2Zvcm0ucm90YXRlKG5ldyBMYXlhLlZlY3RvcjMoMCwgaywgMCkpXG4gICAgfVxuICAgIGRpc1Bvc2UoKSB7XG4gICAgICAgIExheWEuc3RhZ2Uub2ZmKExheWEuRXZlbnQuTU9VU0VfRE9XTiwgdGhpcywgdGhpcy5tb3VzZURvd24pO1xuICAgICAgICBMYXlhLnN0YWdlLm9mZihMYXlhLkV2ZW50Lk1PVVNFX1VQLCB0aGlzLCB0aGlzLm1vdXNlVXApO1xuICAgICAgICB0aGlzLmlzRGlzcG9zZSA9IHRydWU7XG4gICAgfVxufSIsImltcG9ydCBNYW5NYW5hZ2VyIGZyb20gXCIuL01hbk1hbmFnZXJcIjtcclxuaW1wb3J0IEZsb29yTW92ZU1hbmFnZXIgZnJvbSBcIi4vRmxvb3JNb3ZlTWFuYWdlclwiO1xyXG5pbXBvcnQgRmxvb3JDcmVhdGVNYW5hZ2VyIGZyb20gXCIuL0Zsb29yQ3JlYXRlTWFuYWdlclwiO1xyXG5pbXBvcnQgQ2FtZXJhTWFuYWdlciBmcm9tIFwiLi9DYW1lcmFNYW5hZ2VyXCI7XHJcbmltcG9ydCBPYnNlcnZlciBmcm9tIFwiLi9PYnNlcnZlclwiO1xyXG5pbXBvcnQgQ2FtZXJhVHJhbnNTZXQgZnJvbSBcIi4vQ2FtZXJhVHJhbnNTZXRcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZU1haW5TY2VuZSBleHRlbmRzIExheWEuU2NyaXB0M0Qge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLm1haW5PYnNlcnZlciA9IG5ldyBPYnNlcnZlcigpO1xyXG4gICAgfVxyXG4gICAgb25Bd2FrZSgpIHtcclxuICAgICAgICB0aGlzLnNjZW5lID0gdGhpcy5vd25lcjtcclxuICAgIH1cclxuICAgIG9uU3RhcnQoKSB7XHJcbiAgICAgICAgdmFyIG1haW5DYW1lcmEgPSB0aGlzLnNjZW5lLmdldENoaWxkQnlOYW1lKFwiTWFpbiBDYW1lcmFcIik7XHJcbiAgICAgICAgLy9tYWluQ2FtZXJhLmFkZENvbXBvbmVudChDYW1lcmFNYW5hZ2VyKTtcclxuICAgICAgICAvL21haW5DYW1lcmEuYWRkQ29tcG9uZW50KENhbWVyYVRyYW5zU2V0KTtcclxuICAgICAgICB2YXIgbWFpbkxpZ2h0ID0gdGhpcy5zY2VuZS5nZXRDaGlsZEJ5TmFtZShcIkRpcmVjdGlvbmFsIExpZ2h0XCIpO1xyXG4gICAgICAgIHZhciBkb3VibGVQcmVmYWIgPSB0aGlzLnNjZW5lLmdldENoaWxkQnlOYW1lKFwiRE9VQkxFTUFSS1wiKTtcclxuICAgICAgICB2YXIgZGVmZW5jZSA9IHRoaXMuc2NlbmUuZ2V0Q2hpbGRCeU5hbWUoXCJERUZFTkNFXCIpO1xyXG4gICAgICAgIHZhciByb2NrZXQgPSB0aGlzLnNjZW5lLmdldENoaWxkQnlOYW1lKFwiUk9DS0VUXCIpO1xyXG4gICAgICAgIC8v5Zyw5p2/6aKE5Yi25L2TXHJcbiAgICAgICAgdmFyIGZsb29yQmFyUHJlZmFiID0gdGhpcy5zY2VuZS5nZXRDaGlsZEJ5TmFtZShcIkZsb29yQmFyXCIpO1xyXG4gICAgICAgIC8vIC8v56m65Zyw5p2/6aKE5Yi25L2TXHJcbiAgICAgICAgLy8gdmFyIGJsYW5rRmxvb3JQcmVmYWIgPSB0aGlzLnNjZW5lLmdldENoaWxkQnlOYW1lKFwiQmxhbmtGbG9vclwiKTtcclxuICAgICAgICAvL+WcsOadv+WuueWZqFxyXG4gICAgICAgIHZhciBjcmVhdEZsb29yID0gdGhpcy5zY2VuZS5nZXRDaGlsZEJ5TmFtZShcIkZsb29yQ3JlYXRcIik7XHJcbiAgICAgICAgdmFyIHByZWZhYkFyciA9IFtmbG9vckJhclByZWZhYiwgZG91YmxlUHJlZmFiLCBkZWZlbmNlLCByb2NrZXRdO1xyXG4gICAgICAgIGNyZWF0Rmxvb3IuYWRkQ29tcG9uZW50KEZsb29yQ3JlYXRlTWFuYWdlcikucHJlZmFiQXJyID0gcHJlZmFiQXJyO1xyXG4gICAgICAgIGNyZWF0Rmxvb3IuYWRkQ29tcG9uZW50KEZsb29yTW92ZU1hbmFnZXIpO1xyXG4gICAgICAgIC8v5pKe5Ye754m55pWI5qih5Z6LXHJcbiAgICAgICAgdmFyIGxhbmRDb2xsaUVmdCA9IHRoaXMuc2NlbmUuZ2V0Q2hpbGRCeU5hbWUoXCJMYW5kQ29sbGlFZnRcIik7XHJcbiAgICAgICAgLy/ojrflj5blsI/nkINcclxuICAgICAgICB2YXIgbWFuID0gdGhpcy5zY2VuZS5nZXRDaGlsZEJ5TmFtZShcIk1hblwiKTtcclxuICAgICAgICBtYW4uYWRkQ29tcG9uZW50KE1hbk1hbmFnZXIpLmZsb29yQ29udGFpbmVyID0gY3JlYXRGbG9vcjtcclxuICAgICAgICB2YXIgbWFuU2NyaXB0ID0gbWFuLmdldENvbXBvbmVudChNYW5NYW5hZ2VyKTtcclxuICAgICAgICBtYW5TY3JpcHQuY2FtZXJhID0gbWFpbkNhbWVyYTtcclxuICAgICAgICBtYW5TY3JpcHQubGFuZENvbGxpRWZ0ID0gbGFuZENvbGxpRWZ0O1xyXG5cclxuICAgIH1cclxufVxyXG5HYW1lTWFpblNjZW5lLmZsb29yQmFyVHlwZSA9IHtcclxuICAgIG5vcm1hbDogXCJOT1JNQUxcIixcclxuICAgIGFibm9ybWFsOiBcIkFCTk9STUFMXCIsXHJcbiAgICBzdGlsbE9ic3RhY2xlOiBcIlNUSUxMT0JTVEFDTEVcIixcclxuICAgIGRvdWJsZU1hcms6IFwiRE9VQkxFTUFSS1wiLFxyXG4gICAgZGVmZW5jZTogXCJERUZFTkNFXCIsXHJcbiAgICByb2NrZXQ6IFwiUk9DS0VUXCJcclxuXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVBvb2wge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9vbCA9IHt9O1xyXG4gICAgfVxyXG4gICAgZ2V0SXRlbShrZXkpIHtcclxuICAgICAgICBpZiAodGhpcy5fcG9vbFtrZXldKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9wb29sW2tleV0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcG9vbFtrZXldLnBvcCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHV0SXRlbShrZXksIG9iaikge1xyXG4gICAgICAgIG9iai5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5fcG9vbFtrZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Bvb2xba2V5XS5wdXNoKG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9wb29sW2tleV0gPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5fcG9vbFtrZXldLnB1c2gob2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbnN0YW5jZSA9IG5ldyBHYW1lUG9vbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5faW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICAvLyBnZXRQb29sKHR5cGUpIHtcclxuXHJcbiAgICAvLyB9XHJcbiAgICAvLyBjbGVhclBvb2wodHlwZSkge1xyXG5cclxuICAgIC8vIH1cclxufSIsImltcG9ydCBHYW1lTWFpblNjZW5lIGZyb20gXCIuL0dhbWVNYWluU2NlbmVcIjtcclxuXHJcbi8qKlxyXG4gKiDmnKznpLrkvovph4fnlKjpnZ7ohJrmnKznmoTmlrnlvI/lrp7njrDvvIzogIzkvb/nlKjnu6fmib/pobXpnaLln7rnsbvvvIzlrp7njrDpobXpnaLpgLvovpHjgILlnKhJREXph4zpnaLorr7nva7lnLrmma/nmoRSdW50aW1l5bGe5oCn5Y2z5Y+v5ZKM5Zy65pmv6L+b6KGM5YWz6IGUXHJcbiAqIOebuOavlOiEmuacrOaWueW8j++8jOe7p+aJv+W8j+mhtemdouexu++8jOWPr+S7peebtOaOpeS9v+eUqOmhtemdouWumuS5ieeahOWxnuaAp++8iOmAmui/h0lEReWGhXZhcuWxnuaAp+WumuS5ie+8ie+8jOavlOWmgnRoaXMudGlwTGJsbO+8jHRoaXMuc2NvcmVMYmzvvIzlhbfmnInku6PnoIHmj5DnpLrmlYjmnpxcclxuICog5bu66K6u77ya5aaC5p6c5piv6aG16Z2i57qn55qE6YC76L6R77yM6ZyA6KaB6aKR57mB6K6/6Zeu6aG16Z2i5YaF5aSa5Liq5YWD57Sg77yM5L2/55So57un5om/5byP5YaZ5rOV77yM5aaC5p6c5piv54us56uL5bCP5qih5Z2X77yM5Yqf6IO95Y2V5LiA77yM5bu66K6u55So6ISa5pys5pa55byP5a6e546w77yM5q+U5aaC5a2Q5by56ISa5pys44CCXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lVUkgZXh0ZW5kcyBMYXlhLlNjZW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgLy/liqDovb3lnLrmma/mlofku7ZcclxuICAgICAgICB0aGlzLmxvYWRTY2VuZShcInRlc3QvVGVzdFNjZW5lLnNjZW5lXCIpO1xyXG4gICAgICAgIHZhciByZXNvdXJjZSA9IFtcclxuICAgICAgICAgICAgeyB1cmw6IFwiTGF5YVNjZW5lX1NhbXBsZVNjZW5lL0NvbnZlbnRpb25hbC9TYW1wbGVTY2VuZS5sc1wiLCB0eXBlOiBMYXlhM0QuSElFUkFSQ0hZLCBwcmlvcml0eTogMSB9LFxyXG4gICAgICAgIF1cclxuICAgICAgICAvL+mihOWKoOi9vXVuaXR55Zy65pmvXHJcbiAgICAgICAgTGF5YS5sb2FkZXIuY3JlYXRlKHJlc291cmNlLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Mb2FkRmluaXNoKSk7XHJcbiAgICAgICAgLy/pooTliqDovb1qc29uXHJcbiAgICAgICAgTGF5YS5sb2FkZXIubG9hZChcInJlcy9LSFhNLmpzb25cIiwgbnVsbCwgbnVsbCwgTGF5YS5Mb2FkZXIuSlNPTiwgMCk7XHJcbiAgICAgICAgTGF5YS5UZXh0dXJlMkQubG9hZChcInJlcy8yWF9xaXV0aS5wbmdcIilcclxuICAgICAgICBMYXlhLlRleHR1cmUyRC5sb2FkKFwicmVzL2Z1ZHVuX3FpdXRpLnBuZ1wiKVxyXG4gICAgICAgIExheWEuVGV4dHVyZTJELmxvYWQoXCJyZXMvaHVvamlhbl9xaXV0aS5wbmdcIilcclxuICAgIH1cclxuICAgIG9uTG9hZEZpbmlzaCgpIHtcclxuICAgICAgICB2YXIgZmlnaHRTY2VuZSA9IExheWEuTG9hZGVyLmdldFJlcyhcIkxheWFTY2VuZV9TYW1wbGVTY2VuZS9Db252ZW50aW9uYWwvU2FtcGxlU2NlbmUubHNcIik7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5hZGRDaGlsZEF0KGZpZ2h0U2NlbmUsIDApO1xyXG4gICAgICAgIGZpZ2h0U2NlbmUuYWRkQ29tcG9uZW50KEdhbWVNYWluU2NlbmUpO1xyXG4gICAgfVxyXG5cclxufSIsImltcG9ydCBHYW1lUG9vbCBmcm9tIFwiLi9HYW1lUG9vbFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGFuZENvbGxpTWFuYWdlciBleHRlbmRzIExheWEuU2NyaXB0M0Qge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5kaXNUaW1lID0gMztcclxuICAgICAgICB0aGlzLmFjY3VtdGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5wb29sID1HYW1lUG9vbC5nZXRJbnN0YW5jZSgpO1xyXG4gICAgfVxyXG4gICAgb25Bd2FrZSgpIHtcclxuICAgICAgICB0aGlzLmdhbWVPYmogPSB0aGlzLm93bmVyO1xyXG4gICAgfVxyXG4gICAgb25FbmFibGUoKSB7XHJcbiAgICAgICAgdGhpcy5hY2N1bXRpbWUgPSAwO1xyXG4gICAgfVxyXG4gICAgb25VcGRhdGUoKSB7XHJcbiAgICAgICAgdGhpcy5hY2N1bXRpbWUgKz0gTGF5YS50aW1lci5kZWx0YSAqIDAuMDAxO1xyXG4gICAgICAgIGlmICh0aGlzLmFjY3VtdGltZSA+PSB0aGlzLmRpc1RpbWUpIHtcclxuICAgICAgICAgICAgdGhpcy5wb29sLnB1dEl0ZW0oXCJsYW5kVGV4dHVyZVwiLCB0aGlzLmdhbWVPYmopO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCBHYW1lTWFpblNjZW5lIGZyb20gXCIuL0dhbWVNYWluU2NlbmVcIjtcclxuaW1wb3J0IEZsb29yQ3JlYXRlTWFuYWdlciBmcm9tIFwiLi9GbG9vckNyZWF0ZU1hbmFnZXJcIjtcclxuaW1wb3J0IEdhbWVQb29sIGZyb20gXCIuL0dhbWVQb29sXCI7XHJcbmltcG9ydCBPYnNlcnZlciBmcm9tIFwiLi9PYnNlcnZlclwiO1xyXG5pbXBvcnQgTGFuZENvbGxpTWFuYWdlciBmcm9tIFwiLi9MYW5kQ29sbGlNYW5hZ2VyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYW5NYW5hZ2VyIGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIC8v5by56LW36YCf5bqmXHJcbiAgICAgICAgdGhpcy5yZXN0aVNwZWVkID0gbmV3IExheWEuVmVjdG9yMygwLCA2LCAwKTtcclxuICAgICAgICB0aGlzLmltcHVzbGUgPSBuZXcgTGF5YS5WZWN0b3IzKDAsIC0yLCAwKTtcclxuICAgICAgICAvL3Bvb2xcclxuICAgICAgICB0aGlzLm1hblBvb2wgPSBHYW1lUG9vbC5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIHRoaXMubWFuUmlnYnkgPSAwO1xyXG4gICAgICAgIC8v546p5a626YGT5YW3XHJcbiAgICAgICAgdGhpcy5lcXVpcG1lbnQgPSB7XHJcbiAgICAgICAgICAgIGRlZmVuY2U6IDAsXHJcbiAgICAgICAgICAgIHNwZWVkZXI6IDAsXHJcbiAgICAgICAgICAgIGRvdWJsZU1hcms6IDBcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/lnLrmma/lrrnlmahcclxuICAgICAgICB0aGlzLmZsb29yQ29udGFpbmVyID0gMDtcclxuICAgICAgICAvL+inguWvn+iAhVxyXG4gICAgICAgIHRoaXMubWFpblNjZW5lT2JzZXIgPSAwO1xyXG4gICAgICAgIC8v55u45py6XHJcbiAgICAgICAgdGhpcy5jYW1lcmEgPSAwO1xyXG5cclxuICAgICAgICAvL+eOqeWutuW+l+WIhlxyXG4gICAgICAgIHRoaXMucGxheU1hcmsgPSAwO1xyXG4gICAgICAgIC8v5Y2V5qyh5b6X5YiG5YC8XHJcbiAgICAgICAgdGhpcy5tYXJrc2V0VmFsdWVQZXIgPSAxO1xyXG4gICAgICAgIHRoaXMubWFya1ZhbHVlUGVyID0gMDtcclxuICAgICAgICAvL+W9k+WJjeWxguaVsFxyXG4gICAgICAgIHRoaXMuY3VyRmxvb3JMYXllciA9IDA7XHJcbiAgICAgICAgLy/ov57nu63nqb/ov4fnmoRmbG9vclxyXG4gICAgICAgIHRoaXMuY29uc3RhbnRTZXRMYXllciA9IDI7XHJcbiAgICAgICAgdGhpcy5jb25zdGFudEZsb29yTGF5ZXIgPSAwO1xyXG5cclxuICAgICAgICAvL3BsYXllclxyXG4gICAgICAgIHRoaXMud2hpdGVDb2xvciA9IG5ldyBMYXlhLlZlY3RvcjQoMSwgMSwgMSwgMSk7XHJcbiAgICAgICAgdGhpcy53aGl0ZVRyYWlsID0gbmV3IExheWEuVmVjdG9yNCgwLCAwLjg5ODAsIDAuODI3MSwgMC41MDE5NjA4KTtcclxuICAgICAgICB0aGlzLnJlZENvbG9yID0gbmV3IExheWEuVmVjdG9yNCgxLCAwLCAwLCAxKTtcclxuICAgICAgICB0aGlzLnJlZFRyYWlsID0gbmV3IExheWEuVmVjdG9yNCgxLCAwLCAwLCAxKTtcclxuICAgICAgICAvL+aSnuWHu+eJueaViOaooeWei1xyXG4gICAgICAgIHRoaXMubGFuZENvbGxpRWZ0ID0gMDtcclxuICAgICAgICB0aGlzLmxhbmRDb2xsaUNsb25lID0gMDtcclxuICAgICAgICB0aGlzLmxhbmRPZmZlc3QgPSAwLjI7XHJcbiAgICAgICAgLy/njqnlrrbotLTlm75cclxuICAgICAgICB0aGlzLm1hblRleHR1cmUgPSAwO1xyXG4gICAgICAgIC8v546p5a625Yiw55u45py655qE6Led56a7XHJcbiAgICAgICAgdGhpcy5kaXNUb0NhbWVyYSA9IDU7XHJcbiAgICAgICAgLy9cclxuICAgICAgICB0aGlzLm9mZmVzdE51bSA9IDAuNTtcclxuICAgIH1cclxuICAgIG9uQXdha2UoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqID0gdGhpcy5vd25lcjtcclxuICAgICAgICB0aGlzLm1haW5TY2VuZU9ic2VyID0gdGhpcy5nYW1lT2JqLnBhcmVudC5nZXRDb21wb25lbnQoR2FtZU1haW5TY2VuZSkubWFpbk9ic2VydmVyO1xyXG4gICAgfVxyXG4gICAgb25TdGFydCgpIHtcclxuICAgICAgICB0aGlzLm1hblJpZ2J5ID0gdGhpcy5nYW1lT2JqLmdldENvbXBvbmVudChMYXlhLlJpZ2lkYm9keTNEKTtcclxuICAgICAgICB0aGlzLm1hblJpZ2J5Lm1hc3MgPSAyO1xyXG4gICAgICAgIHRoaXMubWFuUmlnYnkubGluZWFyRGFtcGluZyA9IDAuMTtcclxuICAgICAgICB0aGlzLmRhbXBSYXRlID0gMC4wMDE7XHJcbiAgICAgICAgdGhpcy5tYXJrVmFsdWVQZXIgPSB0aGlzLm1hcmtzZXRWYWx1ZVBlcjtcclxuICAgICAgICB0aGlzLmdhbWVPYmoubWVzaFJlbmRlcmVyLm1hdGVyaWFsLmFsYmVkb1RleHR1cmUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubWFuVGV4dHVyZSA9IG51bGxcclxuXHJcbiAgICB9XHJcbiAgICBvblVwZGF0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5jYW1lcmEudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25ZID4gdGhpcy5nYW1lT2JqLnRyYW5zZm9ybS5wb3NpdGlvbi55ICsgdGhpcy5kaXNUb0NhbWVyYSkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbWVyYS50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblkgPSB0aGlzLmdhbWVPYmoudHJhbnNmb3JtLnBvc2l0aW9uLnkgKyB0aGlzLmRpc1RvQ2FtZXJhO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5nYW1lT2JqLnRyYW5zZm9ybS5sb2NhbFBvc2l0aW9uWSArIHRoaXMub2ZmZXN0TnVtIDwgdGhpcy5mbG9vckNvbnRhaW5lci5nZXRDaGlsZEF0KHRoaXMuY3VyRmxvb3JMYXllcikudHJhbnNmb3JtLnBvc2l0aW9uLnkpIHtcclxuICAgICAgICAgICAgdGhpcy50b05leHRGbG9vcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uVHJpZ2dlckVudGVyKG90aGVyKSB7XHJcbiAgICAgICAgc3dpdGNoIChvdGhlci5vd25lci5uYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgR2FtZU1haW5TY2VuZS5mbG9vckJhclR5cGUubm9ybWFsOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWN0Tm9ybWFsRmxvb3Iob3RoZXIub3duZXIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgR2FtZU1haW5TY2VuZS5mbG9vckJhclR5cGUuc3RpbGxPYnN0YWNsZTpcclxuICAgICAgICAgICAgY2FzZSBHYW1lTWFpblNjZW5lLmZsb29yQmFyVHlwZS5hYm5vcm1hbDpcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFjdFJpc2tGbG9vcihvdGhlci5vd25lcik7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHYW1lTWFpblNjZW5lLmZsb29yQmFyVHlwZS5kb3VibGVNYXJrOlxyXG4gICAgICAgICAgICBjYXNlIEdhbWVNYWluU2NlbmUuZmxvb3JCYXJUeXBlLmRlZmVuY2U6XHJcbiAgICAgICAgICAgIGNhc2UgR2FtZU1haW5TY2VuZS5mbG9vckJhclR5cGUucm9ja2V0OlxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5tYW5Qb29sLnB1dEl0ZW0ob3RoZXIub3duZXIubmFtZSwgb3RoZXIub3duZXIpO1xyXG4gICAgICAgICAgICAgICAgb3RoZXIub3duZXIuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkdldEVxdWlwbWVudChvdGhlci5vd25lci5uYW1lKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29udGFjdE5vcm1hbEZsb29yKG9iaikge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnN0YW50Rmxvb3JMYXllciA+PSB0aGlzLmNvbnN0YW50U2V0TGF5ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydENvcm91dGluZShcIm9uY2VcIiwgMC4yLCB0aGlzLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnN0YW50Rmxvb3JMYXllciA9IC0xO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lT2JqLmdldENoaWxkQXQoMCkudHJhaWxSZW5kZXJlci5tYXRlcmlhbC5jb2xvciA9IHRoaXMud2hpdGVUcmFpbDtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgdGhpcy5qdW1wVXAob2JqLCAwKTtcclxuICAgICAgICAgICAgdGhpcy5jb25zdGFudEVmZmVjdCh0aGlzLmZsb29yQ29udGFpbmVyLmdldENoaWxkQXQodGhpcy5jdXJGbG9vckxheWVyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmp1bXBVcChvYmosIDEpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnN0YW50Rmxvb3JMYXllciA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29udGFjdFJpc2tGbG9vcihvYmopIHtcclxuICAgICAgICBpZiAodGhpcy5jb25zdGFudEZsb29yTGF5ZXIgPj0gdGhpcy5jb25zdGFudFNldExheWVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRDb3JvdXRpbmUoXCJvbmNlXCIsIDAuMiwgdGhpcywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25zdGFudEZsb29yTGF5ZXIgPSAtMTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2FtZU9iai5nZXRDaGlsZEF0KDApLnRyYWlsUmVuZGVyZXIubWF0ZXJpYWwuY29sb3IgPSB0aGlzLndoaXRlVHJhaWw7XHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLmp1bXBVcChvYmosIDApO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnN0YW50RWZmZWN0KHRoaXMuZmxvb3JDb250YWluZXIuZ2V0Q2hpbGRBdCh0aGlzLmN1ckZsb29yTGF5ZXIpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVxdWlwbWVudC5kZWZlbmNlIHx8IHRoaXMuZXF1aXBtZW50LnNwZWVkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuanVtcFVwKG9iaiwgMSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29uc3RhbnRGbG9vckxheWVyID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB0b05leHRGbG9vcihvYmopIHtcclxuICAgICAgICB0aGlzLm1haW5TY2VuZU9ic2VyLm5vdGljZShcInJlY3ljbGVcIiwgdGhpcy5jdXJGbG9vckxheWVyKTtcclxuICAgICAgICB0aGlzLm1haW5TY2VuZU9ic2VyLm5vdGljZShcImNyZWF0Rmxvb3JcIiwgMSk7XHJcbiAgICAgICAgdGhpcy5tYXJrVmFsdWVQZXIgPSB0aGlzLm1hcmtzZXRWYWx1ZVBlcjtcclxuICAgICAgICBpZiAodGhpcy5lcXVpcG1lbnQuZG91YmxlTWFyaykge1xyXG4gICAgICAgICAgICB0aGlzLm1hcmtWYWx1ZVBlciA9IDIgKiB0aGlzLm1hcmtzZXRWYWx1ZVBlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wbGF5TWFyayArPSB0aGlzLm1hcmtWYWx1ZVBlcjtcclxuICAgICAgICBMYXlhLnN0YWdlLmdldENoaWxkQXQoMSkuZ2V0Q2hpbGRBdCgwKS5nZXRDaGlsZEF0KDApLnRleHQgPSBcIuWIhuaVsDpcIiArIHRoaXMucGxheU1hcms7XHJcbiAgICAgICAgaWYgKCF0aGlzLmVxdWlwbWVudC5zcGVlZGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uc3RhbnRGbG9vckxheWVyKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3VyRmxvb3JMYXllcisrO1xyXG4gICAgICAgIC8v5pS55Y+Y55CD6aKc6ImyXHJcbiAgICAgICAgaWYgKHRoaXMuY29uc3RhbnRGbG9vckxheWVyID49IHRoaXMuY29uc3RhbnRTZXRMYXllcikge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWVPYmouZ2V0Q2hpbGRBdCgwKS50cmFpbFJlbmRlcmVyLm1hdGVyaWFsLmNvbG9yID0gdGhpcy5yZWRUcmFpbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvL+aWveWKoOmAn+W6plxyXG4gICAgbWFuRm9yY2VTZXQoZm9yY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5lcXVpcG1lbnQuc3BlZWRlcikgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMubWFuUmlnYnkubGluZWFyVmVsb2NpdHkgPSBmb3JjZTtcclxuICAgIH1cclxuICAgIC8v5pKe56KO5LiA5bGC5pWI5p6cXHJcbiAgICBjb25zdGFudEVmZmVjdChjdXJGbG9vcikge1xyXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjdXJGbG9vci5fY2hpbGRyZW4ubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY3VyRmxvb3IuZ2V0Q2hpbGRBdChpbmRleCkuX2NoaWxkcmVuLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gY3VyRmxvb3IuZ2V0Q2hpbGRBdChpbmRleCkuZ2V0Q2hpbGRBdChqKTtcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50Lm5hbWUgIT0gR2FtZU1haW5TY2VuZS5mbG9vckJhclR5cGUubm9ybWFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC50cmFuc2Zvcm0udHJhbnNsYXRlKG5ldyBMYXlhLlZlY3RvcjMoMSwgMSwgMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudHJhbnNmb3JtLnJvdGF0ZShuZXcgTGF5YS5WZWN0b3IzKDMwLCA0MCwgNTApLCBmYWxzZSwgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy/nu5PmnZ9cclxuICAgIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5tYW5SaWdieS5pc0tpbmVtYXRpYyA9IHRydWU7XHJcbiAgICAgICAgTGF5YS50aW1lci5jbGVhckFsbCh0aGlzKTtcclxuICAgICAgICB0aGlzLmdhbWVPYmouZ2V0Q2hpbGRBdCgxKS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm1haW5TY2VuZU9ic2VyLm5vdGljZShcImdhbWVPdmVyXCIpO1xyXG4gICAgICAgIExheWEudGltZXIub25jZSgyMDAwLCB0aGlzLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBnYW1lT3ZlciA9IExheWEuc3RhZ2UuZ2V0Q2hpbGRBdCgxKS5nZXRDaGlsZEF0KDApLmdldENoaWxkQXQoNCk7XHJcbiAgICAgICAgICAgIGdhbWVPdmVyLnZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAganVtcFVwKG9iaiwgaXNTaG93KSB7XHJcbiAgICAgICAgdGhpcy5tYW5Gb3JjZVNldCh0aGlzLnJlc3RpU3BlZWQpOy8v5Y+N5by5XHJcbiAgICAgICAgdGhpcy5jb2xsaUZsb29yZWZmZWN0KG9iaiwgaXNTaG93KTtcclxuICAgIH1cclxuICAgIC8v5pKe5Ye75Zyw6Z2i54m55pWIXHJcbiAgICBjb2xsaUZsb29yZWZmZWN0KG9iaiwgaXNTaG93KSB7XHJcbiAgICAgICAgaWYgKCFpc1Nob3cpIHJldHVybjtcclxuICAgICAgICB0aGlzLmxhbmRDb2xsaUNsb25lID0gdGhpcy5DbG9uZU9iaih0aGlzLmxhbmRDb2xsaUVmdCwgb2JqLCBcImxhbmRUZXh0dXJlXCIpO1xyXG4gICAgICAgIHRoaXMubGFuZENvbGxpQ2xvbmUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxhbmRDb2xsaUNsb25lLnRyYW5zZm9ybS5wb3NpdGlvbiA9IHRoaXMuZ2FtZU9iai50cmFuc2Zvcm0ucG9zaXRpb247XHJcbiAgICAgICAgdGhpcy5sYW5kQ29sbGlDbG9uZS50cmFuc2Zvcm0ubG9jYWxQb3NpdGlvblogPSBvYmoudHJhbnNmb3JtLmxvY2FsUG9zaXRpb25aICsgdGhpcy5sYW5kT2ZmZXN0O1xyXG4gICAgICAgIGlmICghdGhpcy5sYW5kQ29sbGlDbG9uZS5nZXRDb21wb25lbnQoTGFuZENvbGxpTWFuYWdlcikpIHtcclxuICAgICAgICAgICAgdGhpcy5sYW5kQ29sbGlDbG9uZS5hZGRDb21wb25lbnQoTGFuZENvbGxpTWFuYWdlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDlvIDlkK/ljY/nqItcclxuICAgICAqIEBwYXJhbSB7Kn0gdHlwZTogXCJMb29wXCIsXCJvbmNlXCJcclxuICAgICAqIEBwYXJhbSB7Kn0gaW50ZXJ2OumXtOmalCjnp5IpXHJcbiAgICAgKiBAcGFyYW0geyp9IGNhbGxlcjrosIPnlKjogIVcclxuICAgICAqIEBwYXJhbSB7Kn0gY2FsbGJhY2s65Zue6LCDXHJcbiAgICAgKiBAcGFyYW0geyp9IGlzUmVjb3ZlcjrmmK/lkKbopobnm5bljY/nqIvpu5jorqR0cnVlXHJcbiAgICAgKiBAcGFyYW0geyp9IGFyZ3M65Zue6LCD5Y+C5pWwXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0Q29yb3V0aW5lKHR5cGUsIGludGVydiwgY2FsbGVyLCBjYWxsYmFjaywgaXNSZWNvdmVyID0gdHJ1ZSwgLi4uYXJncykge1xyXG4gICAgICAgIGlmICh0eXBlID09PSBcImxvb3BcIikge1xyXG4gICAgICAgICAgICBMYXlhLnRpbWVyLmxvb3AoaW50ZXJ2ICogMTAwMCwgY2FsbGVyLCBjYWxsYmFjaywgWy4uLmFyZ3NdLCBpc1JlY292ZXIpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlID09PSBcIm9uY2VcIikge1xyXG4gICAgICAgICAgICBMYXlhLnRpbWVyLm9uY2UoaW50ZXJ2ICogMTAwMCwgY2FsbGVyLCBjYWxsYmFjaywgWy4uLmFyZ3NdLCBpc1JlY292ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIEdldEVxdWlwbWVudCh0eXBlKSB7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgR2FtZU1haW5TY2VuZS5mbG9vckJhclR5cGUuZG91YmxlTWFyazpcclxuICAgICAgICAgICAgICAgIHRoaXMuZXF1aXBtZW50LmRvdWJsZU1hcmsgPSAxO1xyXG4gICAgICAgICAgICAgICAgTGF5YS5zdGFnZS5nZXRDaGlsZEF0KDEpLmdldENoaWxkQXQoMCkuZ2V0Q2hpbGRBdCgxKS50ZXh0ID0gXCLlj4zlgI06XCIgKyB0aGlzLmVxdWlwbWVudC5kb3VibGVNYXJrO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lT2JqLm1lc2hSZW5kZXJlci5tYXRlcmlhbC5hbGJlZG9UZXh0dXJlID0gTGF5YS5sb2FkZXIuZ2V0UmVzKFwicmVzLzJYX3FpdXRpLnBuZ1wiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRDb3JvdXRpbmUoXCJvbmNlXCIsIDMsIHRoaXMsIHRoaXMuTWFya0Rpcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBHYW1lTWFpblNjZW5lLmZsb29yQmFyVHlwZS5kZWZlbmNlOlxyXG4gICAgICAgICAgICAgICAgLy9nZXQgZGVmZW5jZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5lcXVpcG1lbnQuZGVmZW5jZSA9IDE7XHJcbiAgICAgICAgICAgICAgICBMYXlhLnN0YWdlLmdldENoaWxkQXQoMSkuZ2V0Q2hpbGRBdCgwKS5nZXRDaGlsZEF0KDIpLnRleHQgPSBcIuaKpOebvjpcIiArIHRoaXMuZXF1aXBtZW50LmRlZmVuY2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdhbWVPYmoubWVzaFJlbmRlcmVyLm1hdGVyaWFsLmFsYmVkb1RleHR1cmUgPSBMYXlhLmxvYWRlci5nZXRSZXMoXCJyZXMvZnVkdW5fcWl1dGkucG5nXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydENvcm91dGluZShcIm9uY2VcIiwgMywgdGhpcywgdGhpcy5EZWZlbmNlRGlzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEdhbWVNYWluU2NlbmUuZmxvb3JCYXJUeXBlLnJvY2tldDpcclxuICAgICAgICAgICAgICAgIC8vc3BlZWQgdXBcclxuICAgICAgICAgICAgICAgIHRoaXMuZXF1aXBtZW50LnNwZWVkZXIgPSAxO1xyXG4gICAgICAgICAgICAgICAgTGF5YS5zdGFnZS5nZXRDaGlsZEF0KDEpLmdldENoaWxkQXQoMCkuZ2V0Q2hpbGRBdCgzKS50ZXh0ID0gXCLngavnrq06XCIgKyB0aGlzLmVxdWlwbWVudC5zcGVlZGVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nYW1lT2JqLm1lc2hSZW5kZXJlci5tYXRlcmlhbC5hbGJlZG9UZXh0dXJlID0gTGF5YS5sb2FkZXIuZ2V0UmVzKFwicmVzL2h1b2ppYW5fcWl1dGkucG5nXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydENvcm91dGluZShcIm9uY2VcIiwgMS41LCB0aGlzLCB0aGlzLlJvY2tldERpcyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIE1hcmtEaXMoKSB7XHJcbiAgICAgICAgdGhpcy5lcXVpcG1lbnQuZG91YmxlTWFyayA9IDA7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5nZXRDaGlsZEF0KDEpLmdldENoaWxkQXQoMCkuZ2V0Q2hpbGRBdCgxKS50ZXh0ID0gXCLlj4zlgI06XCIgKyAwO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iai5tZXNoUmVuZGVyZXIubWF0ZXJpYWwuYWxiZWRvVGV4dHVyZSA9IHRoaXMubWFuVGV4dHVyZTtcclxuICAgIH1cclxuICAgIERlZmVuY2VEaXMoKSB7XHJcbiAgICAgICAgdGhpcy5lcXVpcG1lbnQuZGVmZW5jZSA9IDA7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5nZXRDaGlsZEF0KDEpLmdldENoaWxkQXQoMCkuZ2V0Q2hpbGRBdCgyKS50ZXh0ID0gXCLmiqTnm746XCIgKyAwO1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iai5tZXNoUmVuZGVyZXIubWF0ZXJpYWwuYWxiZWRvVGV4dHVyZSA9IHRoaXMubWFuVGV4dHVyZTtcclxuICAgIH1cclxuICAgIFJvY2tldERpcygpIHtcclxuICAgICAgICB0aGlzLmVxdWlwbWVudC5zcGVlZGVyID0gMDtcclxuICAgICAgICBMYXlhLnN0YWdlLmdldENoaWxkQXQoMSkuZ2V0Q2hpbGRBdCgwKS5nZXRDaGlsZEF0KDMpLnRleHQgPSBcIueBq+eurTpcIiArIDA7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqLm1lc2hSZW5kZXJlci5tYXRlcmlhbC5hbGJlZG9UZXh0dXJlID0gdGhpcy5tYW5UZXh0dXJlO1xyXG4gICAgfVxyXG4gICAgLy/lhYvpmobniankvZNcclxuICAgIENsb25lT2JqKG1vdWRsZSwgcGFyZW50LCBuYW1lKSB7XHJcbiAgICAgICAgdmFyIGNsb25lID0gdGhpcy5tYW5Qb29sLmdldEl0ZW0obmFtZSk7XHJcbiAgICAgICAgaWYgKGNsb25lKSB7XHJcbiAgICAgICAgICAgIHBhcmVudC5hZGRDaGlsZChjbG9uZSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY2xvbmUgPSBMYXlhLlNwcml0ZTNELmluc3RhbnRpYXRlKG1vdWRsZSwgcGFyZW50LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGNsb25lLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjbG9uZS50cmFuc2Zvcm0ucG9zaXRpb24gPSBtb3VkbGUudHJhbnNmb3JtLnBvc2l0aW9uO1xyXG4gICAgICAgIGNsb25lLnRyYW5zZm9ybS5yb3RhdGlvbiA9IG1vdWRsZS50cmFuc2Zvcm0ucm90YXRpb247XHJcblxyXG4gICAgICAgIHJldHVybiBjbG9uZTtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE9ic2VydmVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLl9kaWN0aW9uYXJ5ID0ge307XHJcbiAgICB9XHJcbiAgICB3YXRjaChrZXksIGZ1bmMpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGljdGlvbmFyeVtrZXldKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kaWN0aW9uYXJ5W2tleV0gIT0gZnVuYykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGljdGlvbmFyeVtrZXldLnB1c2goZnVuYyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RpY3Rpb25hcnlba2V5XSA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLl9kaWN0aW9uYXJ5W2tleV0ucHVzaChmdW5jKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBub3RpY2Uoa2V5LCAuLi5hcmdzKSB7XHJcbiAgICAgICAgZm9yIChsZXQgb2JqIGluIHRoaXMuX2RpY3Rpb25hcnlba2V5XSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGljdGlvbmFyeVtrZXldLmhhc093blByb3BlcnR5KG9iaikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RpY3Rpb25hcnlba2V5XVtvYmpdKC4uLmFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVtb3ZlQWxsT2JzZXJ2ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5fZGljdGlvbmFyeSA9IHt9O1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlT2JzZXJ2ZXJCeVR5cGUodHlwZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kaWN0aW9uYXJ5Lmhhc0tleSh0eXBlKSkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5fZGljdGlvbmFyeS50eXBlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gbmV3IE9ic2VydmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbn0iLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxudmFyIENMQVNTJD1MYXlhLmNsYXNzO1xyXG52YXIgU1RBVElDQVRUUiQ9TGF5YS5zdGF0aWM7XG52YXIgVmlldz1sYXlhLnVpLlZpZXc7XHJcbnZhciBEaWFsb2c9bGF5YS51aS5EaWFsb2c7XHJcbnZhciBTY2VuZT1MYXlhLlNjZW5lO1xuaWYoIXdpbmRvdy51aSkgd2luZG93LnVpPXt9O1xudmFyIFRlc3RTY2VuZVVJPShmdW5jdGlvbihfc3VwZXIpe1xyXG5cdFx0ZnVuY3Rpb24gVGVzdFNjZW5lVUkoKXtcclxuXHRcdFx0XHJcblx0XHRcdFRlc3RTY2VuZVVJLl9fc3VwZXIuY2FsbCh0aGlzKTtcclxuXHRcdH1cclxuXHRcdENMQVNTJChUZXN0U2NlbmVVSSwndWkudGVzdC5UZXN0U2NlbmVVSScsX3N1cGVyKTtcclxuXHRcdHZhciBfX3Byb3RvX189VGVzdFNjZW5lVUkucHJvdG90eXBlO1xyXG5cdFx0X19wcm90b19fLmNyZWF0ZUNoaWxkcmVuPWZ1bmN0aW9uKCl7XHJcblx0XHRcdF9zdXBlci5wcm90b3R5cGUuY3JlYXRlQ2hpbGRyZW4uY2FsbCh0aGlzKTtcclxuXHRcdFx0dGhpcy5sb2FkU2NlbmUoXCJ0ZXN0L1Rlc3RTY2VuZVwiKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBUZXN0U2NlbmVVSTtcclxuXHR9KShTY2VuZSk7XG5leHBvcnQge3VpIGFzIGRlZmF1bHR9OyJdfQ==
