var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _GameUI = require("./script/GameUI");

var _GameUI2 = _interopRequireDefault(_GameUI);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
    function GameConfig() {
        _classCallCheck(this, GameConfig);
    }

    _createClass(GameConfig, null, [{
        key: "init",
        value: function init() {
            //注册Script或者Runtime引用
            var reg = Laya.ClassUtils.regClass;
            reg("script/GameUI.js", _GameUI2.default);
        }
    }]);

    return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 640;
GameConfig.height = 1136;
GameConfig.scaleMode = "fixedwidth";
GameConfig.screenMode = "none";
GameConfig.alignV = "top";
GameConfig.alignH = "left";
GameConfig.startScene = "test/TestScene.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./script/GameUI":6}],2:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

var _layaMaxUI = require("./ui/layaMaxUI");

var _layaMaxUI2 = _interopRequireDefault(_layaMaxUI);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
	function Main() {
		_classCallCheck(this, Main);

		//根据IDE设置初始化引擎		
		if (window["Laya3D"]) Laya3D.init(_GameConfig2.default.width, _GameConfig2.default.height);else Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, Laya["WebGL"]);
		Laya["Physics"] && Laya["Physics"].enable();
		Laya["DebugPanel"] && Laya["DebugPanel"].enable();
		Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
		Laya.stage.screenMode = _GameConfig2.default.screenMode;
		Laya.stage.alignV = _GameConfig2.default.alignV;
		Laya.stage.alignH = _GameConfig2.default.alignH;
		//兼容微信不支持加载scene后缀场景
		Laya.URL.exportSceneToJson = _GameConfig2.default.exportSceneToJson;

		//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
		if (_GameConfig2.default.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
		if (_GameConfig2.default.physicsDebug && Laya["PhysicsDebugDraw"]) Laya["PhysicsDebugDraw"].enable();
		if (_GameConfig2.default.stat) Laya.Stat.show();
		Laya.alertGlobalError = true;

		//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
		Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
	}

	_createClass(Main, [{
		key: "onVersionLoaded",
		value: function onVersionLoaded() {
			//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
			Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
		}
	}, {
		key: "onConfigLoaded",
		value: function onConfigLoaded() {
			//加载IDE指定的场景
			_GameConfig2.default.startScene && Laya.Scene.open(_GameConfig2.default.startScene);
		}
	}]);

	return Main;
}();
//激活启动类


new Main();

},{"./GameConfig":1,"./ui/layaMaxUI":8}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FloorCreateManager = function (_Laya$Script3D) {
    _inherits(FloorCreateManager, _Laya$Script3D);

    function FloorCreateManager() {
        _classCallCheck(this, FloorCreateManager);

        var _this = _possibleConstructorReturn(this, (FloorCreateManager.__proto__ || Object.getPrototypeOf(FloorCreateManager)).call(this));

        _this.floorBarPrefab = 0;
        //一次性生产Floor层数
        _this.creatLayer = 1;
        //每层之间的间隔
        _this.FloorInterv = 30;
        return _this;
    }

    _createClass(FloorCreateManager, [{
        key: "onAwake",
        value: function onAwake() {
            this.gameObj = this.owner;
        }
    }, {
        key: "onEnable",
        value: function onEnable() {}
    }, {
        key: "onStart",
        value: function onStart() {
            this.floorInit();
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {}
        //初始化

    }, {
        key: "floorInit",
        value: function floorInit() {
            //当前层数
            var curLayerindex = 0;
            while (curLayerindex < this.creatLayer) {
                //一层的Floor
                var singleFloor = new Laya.Sprite3D();
                var randomData = this.getRandomData();
                var baseBlock = this.createBaseBlock(randomData);
                var spBlock = this.creatSPBlock(randomData);
                singleFloor.addChildren(baseBlock, spBlock);
                var singleFloorPos = singleFloor.transform.position;
                singleFloorPos.y += this.FloorInterv;
                // singleFloor.transform.translate()
                this.gameObj.addChild(singleFloor);
                curLayerindex++;
            }
        }
        /**获取随机数据 */

    }, {
        key: "getRandomData",
        value: function getRandomData() {
            var jsonData = Laya.loader.getRes("res/KHXM.json");
            var jsonArr = Object.keys(jsonData).map(function (key) {
                return jsonData[key];
            });
            var randomIndex = Math.floor(Math.random() * jsonArr.length);
            return jsonArr[randomIndex];
        }
    }, {
        key: "createBaseBlock",
        value: function createBaseBlock(randomData) {
            var baseBlockObjs = new Laya.Sprite3D();
            if (!randomData.base_block instanceof Array) return;
            for (var j = 0; j < randomData.base_block.length; j++) {
                var obj = randomData.base_block[j];
                if (obj) {
                    var floorClone = Laya.Sprite3D.instantiate(this.floorBarPrefab, baseBlockObjs, false);
                    floorClone.transform.rotate(new Laya.Vector3(0, 0, j * 22.5), true, false);
                    //反转
                    if (randomData.reversal) {
                        // floorClone.transform.rotate(new Laya.Vector3(0,0,180 ), true, false);
                        // floorClone.transform.translate(new Laya.Vector3(2,0,0));
                    }
                    floorClone.active = true;
                }
            }
            return baseBlockObjs;
        }
    }, {
        key: "creatSPBlock",
        value: function creatSPBlock(randomData) {
            var spBlockObjs = new Laya.Sprite3D();
            if (!randomData.sp_block_size instanceof Array) return;
            for (var j = 0; j < randomData.sp_block_size.length; j++) {
                var obj = randomData.sp_block_size[j];
                if (obj) {
                    var num = 0;
                    while (num < obj) {
                        var floorClone = Laya.Sprite3D.instantiate(this.floorBarPrefab, spBlockObjs, false);
                        floorClone.transform.rotate(new Laya.Vector3(0, 0, num * 22.5), true, false);
                        //floorClone材质设置
                        floorClone.meshRenderer.material.albedoColor = new Laya.Vector4(0.5, 0.5, 0.5, 1);
                        //添加标签
                        floorClone.name = "SP";
                        floorClone.active = true;
                        //起始位置
                        floorClone.transform.rotate(new Laya.Vector3(0, 0, randomData.sp_block_start_pos[j] * 22.5), true, false);
                        //速度
                        //randomData.sp_block_move_speed
                        num++;
                    }
                }
                return spBlockObjs;
            }
        }
    }]);

    return FloorCreateManager;
}(Laya.Script3D);

exports.default = FloorCreateManager;

FloorCreateManager.BAR_TOGETHER_NUM = 16;

},{}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var FloorMoveManager = function (_Laya$Script3D) {
    _inherits(FloorMoveManager, _Laya$Script3D);

    function FloorMoveManager() {
        _classCallCheck(this, FloorMoveManager);

        var _this = _possibleConstructorReturn(this, (FloorMoveManager.__proto__ || Object.getPrototypeOf(FloorMoveManager)).call(this));

        _this.yawPitchRoll = new Laya.Vector3();
        _this.tempRotationZ = new Laya.Quaternion();
        _this.rotaionSpeed = 0.0005;
        return _this;
    }

    _createClass(FloorMoveManager, [{
        key: "onAwake",
        value: function onAwake() {
            Laya.stage.on(Laya.Event.MOUSE_DOWN, this, this.mouseDown);
            Laya.stage.on(Laya.Event.MOUSE_UP, this, this.mouseUp);
            this.gameObj = this.owner;
        }
    }, {
        key: "_onDestroy",
        value: function _onDestroy() {
            //关闭监听函数
            Laya.stage.off(Laya.Event.MOUSE_DOWN, this, this.mouseDown);
            Laya.stage.off(Laya.Event.MOUSE_UP, this, this.mouseUp);
        }
    }, {
        key: "onUpdate",
        value: function onUpdate(state) {
            var elapsedTime = Laya.timer.delta;
            if (!isNaN(this.lastMouseX) && this.isMouseDown) {
                var scene = this.owner.scene;
                var offsetX = Laya.stage.mouseX - this.lastMouseX;
                var yprElem = this.yawPitchRoll;
                yprElem.x += offsetX * this.rotaionSpeed * elapsedTime;
                this.updateRotation();
            }
            this.lastMouseX = Laya.stage.mouseX;
        }
    }, {
        key: "mouseDown",
        value: function mouseDown(e) {
            //获得鼠标的旋转值
            this.gameObj.transform.localRotation.getYawPitchRoll(this.yawPitchRoll);
            //获得鼠标的x值
            this.lastMouseX = Laya.stage.mouseX;
            //设置bool值
            this.isMouseDown = true;
        }
    }, {
        key: "mouseUp",
        value: function mouseUp(e) {
            //设置bool值
            this.isMouseDown = false;
        }
    }, {
        key: "updateRotation",
        value: function updateRotation() {
            Laya.Quaternion.createFromYawPitchRoll(this.yawPitchRoll.x, this.yawPitchRoll.y, this.yawPitchRoll.z, this.tempRotationZ);
            this.tempRotationZ.cloneTo(this.gameObj.transform.localRotation);
            this.gameObj.transform.localRotation = this.gameObj.transform.localRotation;
        }
    }]);

    return FloorMoveManager;
}(Laya.Script3D);

exports.default = FloorMoveManager;

},{}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _ManManager = require("./ManManager");

var _ManManager2 = _interopRequireDefault(_ManManager);

var _FloorMoveManager = require("./FloorMoveManager");

var _FloorMoveManager2 = _interopRequireDefault(_FloorMoveManager);

var _FloorCreateManager = require("./FloorCreateManager");

var _FloorCreateManager2 = _interopRequireDefault(_FloorCreateManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GameMainScene = function (_Laya$Script3D) {
    _inherits(GameMainScene, _Laya$Script3D);

    function GameMainScene() {
        _classCallCheck(this, GameMainScene);

        return _possibleConstructorReturn(this, (GameMainScene.__proto__ || Object.getPrototypeOf(GameMainScene)).call(this));
        // this.mainCamera = 0;
        // this.mainLight = 0;
        // this.man = 0;
        // this.floorBarPrefab = 0;
        // this.creatFloor = 0;
    }

    _createClass(GameMainScene, [{
        key: "onAwake",
        value: function onAwake() {
            this.scene = this.owner;
        }
    }, {
        key: "onStart",
        value: function onStart() {
            var mainCamera = this.scene.getChildByName("Main Camera");
            var mainLight = this.scene.getChildByName("Directional Light");
            //获取小球
            var man = this.scene.getChildByName("Man");
            man.addComponent(_ManManager2.default);
            //地板块预制体
            var floorBarPrefab = this.scene.getChildByName("FloorBar");
            //地板(复合)
            var creatFloor = this.scene.getChildByName("FloorCreat");
            creatFloor.addComponent(_FloorCreateManager2.default).floorBarPrefab = floorBarPrefab;
            creatFloor.addComponent(_FloorMoveManager2.default);
        }
    }]);

    return GameMainScene;
}(Laya.Script3D);

exports.default = GameMainScene;

},{"./FloorCreateManager":3,"./FloorMoveManager":4,"./ManManager":7}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameMainScene = require("./GameMainScene");

var _GameMainScene2 = _interopRequireDefault(_GameMainScene);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**
 * 本示例采用非脚本的方式实现，而使用继承页面基类，实现页面逻辑。在IDE里面设置场景的Runtime属性即可和场景进行关联
 * 相比脚本方式，继承式页面类，可以直接使用页面定义的属性（通过IDE内var属性定义），比如this.tipLbll，this.scoreLbl，具有代码提示效果
 * 建议：如果是页面级的逻辑，需要频繁访问页面内多个元素，使用继承式写法，如果是独立小模块，功能单一，建议用脚本方式实现，比如子弹脚本。
 */
var GameUI = function (_Laya$Scene) {
    _inherits(GameUI, _Laya$Scene);

    function GameUI() {
        _classCallCheck(this, GameUI);

        //加载场景文件
        var _this = _possibleConstructorReturn(this, (GameUI.__proto__ || Object.getPrototypeOf(GameUI)).call(this));

        _this.loadScene("test/TestScene.scene");
        var resource = [{ url: "LayaScene_SampleScene/Conventional/SampleScene.ls", type: Laya3D.HIERARCHY, priority: 1 }];
        //预加载unity场景
        Laya.loader.create(resource, Laya.Handler.create(_this, _this.onLoadFinish));
        //预加载json
        Laya.loader.load("res/KHXM.json", Laya.Handler.create(_this, _this.onLoaded), null, Laya.Loader.JSON, 0);
        return _this;
    }

    _createClass(GameUI, [{
        key: "onLoadFinish",
        value: function onLoadFinish() {
            var fightScene = Laya.Loader.getRes("LayaScene_SampleScene/Conventional/SampleScene.ls");
            Laya.stage.addChild(fightScene);
            fightScene.addComponent(_GameMainScene2.default);
        }
    }]);

    return GameUI;
}(Laya.Scene);

exports.default = GameUI;

},{"./GameMainScene":5}],7:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ManManager = function (_Laya$Script3D) {
    _inherits(ManManager, _Laya$Script3D);

    function ManManager() {
        _classCallCheck(this, ManManager);

        var _this = _possibleConstructorReturn(this, (ManManager.__proto__ || Object.getPrototypeOf(ManManager)).call(this));

        _this.manStatus = 0;
        _this.manSpeed = 0;
        _this.manRigby = 0;
        return _this;
    }

    _createClass(ManManager, [{
        key: "onAwake",
        value: function onAwake() {
            this.gameObj = this.owner;
        }
    }, {
        key: "onStart",
        value: function onStart() {
            this.manRigby = this.gameObj.getComponent(Laya.Rigidbody3D);
        }
    }, {
        key: "onUpdate",
        value: function onUpdate() {}
    }, {
        key: "ManMove",
        value: function ManMove() {}
    }]);

    return ManManager;
}(Laya.Script3D);

exports.default = ManManager;

},{}],8:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var CLASS$ = Laya.class;
var STATICATTR$ = Laya.static;
var View = laya.ui.View;
var Dialog = laya.ui.Dialog;
var Scene = Laya.Scene;
if (!window.ui) window.ui = {};
var TestSceneUI = function (_super) {
	function TestSceneUI() {

		TestSceneUI.__super.call(this);
	}
	CLASS$(TestSceneUI, 'ui.test.TestSceneUI', _super);
	var __proto__ = TestSceneUI.prototype;
	__proto__.createChildren = function () {
		_super.prototype.createChildren.call(this);
		this.loadScene("test/TestScene");
	};
	return TestSceneUI;
}(Scene);
exports.default = ui;

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL2xheWFFbmdpbmUvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcuanMiLCJzcmMvTWFpbi5qcyIsInNyYy9zY3JpcHQvRmxvb3JDcmVhdGVNYW5hZ2VyLmpzIiwic3JjL3NjcmlwdC9GbG9vck1vdmVNYW5hZ2VyLmpzIiwic3JjL3NjcmlwdC9HYW1lTWFpblNjZW5lLmpzIiwic3JjL3NjcmlwdC9HYW1lVUkuanMiLCJzcmMvc2NyaXB0L01hbk1hbmFnZXIuanMiLCJzcmMvdWkvbGF5YU1heFVJLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7cWpCQ1ZBOzs7QUFDQTs7Ozs7Ozs7SUFFcUIsVTs7Ozs7OzsrQkFDSDtBQUNWO0FBQ0EsZ0JBQUksTUFBTSxLQUFLLFVBQUwsQ0FBZ0IsUUFBMUI7QUFDTixnQkFBSSxrQkFBSixFQUF1QixnQkFBdkI7QUFDRzs7Ozs7O2tCQUxnQixVOztBQU9yQixXQUFXLEtBQVgsR0FBbUIsR0FBbkI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsSUFBcEI7QUFDQSxXQUFXLFNBQVgsR0FBc0IsWUFBdEI7QUFDQSxXQUFXLFVBQVgsR0FBd0IsTUFBeEI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsS0FBcEI7QUFDQSxXQUFXLE1BQVgsR0FBb0IsTUFBcEI7QUFDQSxXQUFXLFVBQVgsR0FBd0Isc0JBQXhCO0FBQ0EsV0FBVyxTQUFYLEdBQXVCLEVBQXZCO0FBQ0EsV0FBVyxLQUFYLEdBQW1CLEtBQW5CO0FBQ0EsV0FBVyxJQUFYLEdBQWtCLEtBQWxCO0FBQ0EsV0FBVyxZQUFYLEdBQTBCLEtBQTFCO0FBQ0EsV0FBVyxpQkFBWCxHQUErQixJQUEvQjs7QUFFQSxXQUFXLElBQVg7Ozs7Ozs7QUN2QkM7Ozs7QUFDRDs7Ozs7Ozs7SUFDTSxJO0FBQ0ws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QUFLLE9BQUwsR0FBYSxLQUFLLEtBQWxCO0FBQ0g7OztrQ0FDUTtBQUNMLGlCQUFLLFFBQUwsR0FBYyxLQUFLLE9BQUwsQ0FBYSxZQUFiLENBQTBCLEtBQUssV0FBL0IsQ0FBZDtBQUVIOzs7bUNBQ1MsQ0FFVDs7O2tDQUNRLENBRVI7Ozs7RUFuQm1DLEtBQUssUTs7a0JBQXhCLFU7Ozs7Ozs7O0FDQXJCO0FBQ0EsSUFBSSxTQUFPLEtBQUssS0FBaEI7QUFDQSxJQUFJLGNBQVksS0FBSyxNQUFyQjtBQUNBLElBQUksT0FBSyxLQUFLLEVBQUwsQ0FBUSxJQUFqQjtBQUNBLElBQUksU0FBTyxLQUFLLEVBQUwsQ0FBUSxNQUFuQjtBQUNBLElBQUksUUFBTSxLQUFLLEtBQWY7QUFDQSxJQUFHLENBQUMsT0FBTyxFQUFYLEVBQWUsT0FBTyxFQUFQLEdBQVUsRUFBVjtBQUNmLElBQUksY0FBYSxVQUFTLE1BQVQsRUFBZ0I7QUFDL0IsVUFBUyxXQUFULEdBQXNCOztBQUVyQixjQUFZLE9BQVosQ0FBb0IsSUFBcEIsQ0FBeUIsSUFBekI7QUFDQTtBQUNELFFBQU8sV0FBUCxFQUFtQixxQkFBbkIsRUFBeUMsTUFBekM7QUFDQSxLQUFJLFlBQVUsWUFBWSxTQUExQjtBQUNBLFdBQVUsY0FBVixHQUF5QixZQUFVO0FBQ2xDLFNBQU8sU0FBUCxDQUFpQixjQUFqQixDQUFnQyxJQUFoQyxDQUFxQyxJQUFyQztBQUNBLE9BQUssU0FBTCxDQUFlLGdCQUFmO0FBQ0EsRUFIRDtBQUlBLFFBQU8sV0FBUDtBQUNBLENBWmMsQ0FZWixLQVpZLENBQWhCO1FBYWMsTyxHQUFOLEUiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbmltcG9ydCBHYW1lVUkgZnJvbSBcIi4vc2NyaXB0L0dhbWVVSVwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29uZmlnIHtcclxuICAgIHN0YXRpYyBpbml0KCkge1xyXG4gICAgICAgIC8v5rOo5YaMU2NyaXB05oiW6ICFUnVudGltZeW8leeUqFxyXG4gICAgICAgIGxldCByZWcgPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcblx0XHRyZWcoXCJzY3JpcHQvR2FtZVVJLmpzXCIsR2FtZVVJKTtcclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLndpZHRoID0gNjQwO1xyXG5HYW1lQ29uZmlnLmhlaWdodCA9IDExMzY7XHJcbkdhbWVDb25maWcuc2NhbGVNb2RlID1cImZpeGVkd2lkdGhcIjtcclxuR2FtZUNvbmZpZy5zY3JlZW5Nb2RlID0gXCJub25lXCI7XHJcbkdhbWVDb25maWcuYWxpZ25WID0gXCJ0b3BcIjtcclxuR2FtZUNvbmZpZy5hbGlnbkggPSBcImxlZnRcIjtcclxuR2FtZUNvbmZpZy5zdGFydFNjZW5lID0gXCJ0ZXN0L1Rlc3RTY2VuZS5zY2VuZVwiO1xyXG5HYW1lQ29uZmlnLnNjZW5lUm9vdCA9IFwiXCI7XHJcbkdhbWVDb25maWcuZGVidWcgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5zdGF0ID0gZmFsc2U7XHJcbkdhbWVDb25maWcucGh5c2ljc0RlYnVnID0gZmFsc2U7XHJcbkdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb24gPSB0cnVlO1xyXG5cclxuR2FtZUNvbmZpZy5pbml0KCk7XHJcbiIsIu+7v2ltcG9ydCBHYW1lQ29uZmlnIGZyb20gXCIuL0dhbWVDb25maWdcIjtcclxuaW1wb3J0IHVpIGZyb20gXCIuL3VpL2xheWFNYXhVSVwiO1xyXG5jbGFzcyBNYWluIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0aWYgKHdpbmRvd1tcIkxheWEzRFwiXSkgTGF5YTNELmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQpO1xyXG5cdFx0ZWxzZSBMYXlhLmluaXQoR2FtZUNvbmZpZy53aWR0aCwgR2FtZUNvbmZpZy5oZWlnaHQsIExheWFbXCJXZWJHTFwiXSk7XHJcblx0XHRMYXlhW1wiUGh5c2ljc1wiXSAmJiBMYXlhW1wiUGh5c2ljc1wiXS5lbmFibGUoKTtcclxuXHRcdExheWFbXCJEZWJ1Z1BhbmVsXCJdICYmIExheWFbXCJEZWJ1Z1BhbmVsXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdExheWEuc3RhZ2UuYWxpZ25WID0gR2FtZUNvbmZpZy5hbGlnblY7XHJcblx0XHRMYXlhLnN0YWdlLmFsaWduSCA9IEdhbWVDb25maWcuYWxpZ25IO1xyXG5cdFx0Ly/lhbzlrrnlvq7kv6HkuI3mlK/mjIHliqDovb1zY2VuZeWQjue8gOWcuuaZr1xyXG5cdFx0TGF5YS5VUkwuZXhwb3J0U2NlbmVUb0pzb24gPSBHYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uO1xyXG5cclxuXHRcdC8v5omT5byA6LCD6K+V6Z2i5p2/77yI6YCa6L+HSURF6K6+572u6LCD6K+V5qih5byP77yM5oiW6ICFdXJs5Zyw5Z2A5aKe5YqgZGVidWc9dHJ1ZeWPguaVsO+8jOWdh+WPr+aJk+W8gOiwg+ivlemdouadv++8iVxyXG5cdFx0aWYgKEdhbWVDb25maWcuZGVidWcgfHwgTGF5YS5VdGlscy5nZXRRdWVyeVN0cmluZyhcImRlYnVnXCIpID09IFwidHJ1ZVwiKSBMYXlhLmVuYWJsZURlYnVnUGFuZWwoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyAmJiBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXSkgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0uZW5hYmxlKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5zdGF0KSBMYXlhLlN0YXQuc2hvdygpO1xyXG5cdFx0TGF5YS5hbGVydEdsb2JhbEVycm9yID0gdHJ1ZTtcclxuXHJcblx0XHQvL+a/gOa0u+i1hOa6kOeJiOacrOaOp+WItu+8jHZlcnNpb24uanNvbueUsUlEReWPkeW4g+WKn+iDveiHquWKqOeUn+aIkO+8jOWmguaenOayoeacieS5n+S4jeW9seWTjeWQjue7rea1geeoi1xyXG5cdFx0TGF5YS5SZXNvdXJjZVZlcnNpb24uZW5hYmxlKFwidmVyc2lvbi5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vblZlcnNpb25Mb2FkZWQpLCBMYXlhLlJlc291cmNlVmVyc2lvbi5GSUxFTkFNRV9WRVJTSU9OKTtcclxuXHR9XHJcblxyXG5cdG9uVmVyc2lvbkxvYWRlZCgpIHtcclxuXHRcdC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XHJcblx0XHRMYXlhLkF0bGFzSW5mb01hbmFnZXIuZW5hYmxlKFwiZmlsZWNvbmZpZy5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkNvbmZpZ0xvYWRlZCkpO1xyXG5cdH1cclxuXHJcblx0b25Db25maWdMb2FkZWQoKSB7XHJcblx0XHQvL+WKoOi9vUlEReaMh+WumueahOWcuuaZr1xyXG5cdFx0R2FtZUNvbmZpZy5zdGFydFNjZW5lICYmIExheWEuU2NlbmUub3BlbihHYW1lQ29uZmlnLnN0YXJ0U2NlbmUpO1xyXG5cdH1cclxufVxyXG4vL+a/gOa0u+WQr+WKqOexu1xyXG5uZXcgTWFpbigpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGbG9vckNyZWF0ZU1hbmFnZXIgZXh0ZW5kcyBMYXlhLlNjcmlwdDNEIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5mbG9vckJhclByZWZhYiA9IDA7XHJcbiAgICAgICAgLy/kuIDmrKHmgKfnlJ/kuqdGbG9vcuWxguaVsFxyXG4gICAgICAgIHRoaXMuY3JlYXRMYXllciA9IDE7XHJcbiAgICAgICAgLy/mr4/lsYLkuYvpl7TnmoTpl7TpmpRcclxuICAgICAgICB0aGlzLkZsb29ySW50ZXJ2ID0gMzA7XHJcbiAgICB9XHJcbiAgICBvbkF3YWtlKCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZU9iaiA9IHRoaXMub3duZXI7XHJcbiAgICB9XHJcbiAgICBvbkVuYWJsZSgpIHtcclxuXHJcbiAgICB9XHJcbiAgICBvblN0YXJ0KCkge1xyXG4gICAgICAgIHRoaXMuZmxvb3JJbml0KCk7XHJcbiAgICB9XHJcbiAgICBvblVwZGF0ZSgpIHtcclxuXHJcbiAgICB9XHJcbiAgICAvL+WIneWni+WMllxyXG4gICAgZmxvb3JJbml0KCkge1xyXG4gICAgICAgIC8v5b2T5YmN5bGC5pWwXHJcbiAgICAgICAgdmFyIGN1ckxheWVyaW5kZXggPSAwO1xyXG4gICAgICAgIHdoaWxlIChjdXJMYXllcmluZGV4IDwgdGhpcy5jcmVhdExheWVyKSB7XHJcbiAgICAgICAgICAgIC8v5LiA5bGC55qERmxvb3JcclxuICAgICAgICAgICAgdmFyIHNpbmdsZUZsb29yID0gbmV3IExheWEuU3ByaXRlM0QoKTtcclxuICAgICAgICAgICAgdmFyIHJhbmRvbURhdGEgPSB0aGlzLmdldFJhbmRvbURhdGEoKTtcclxuICAgICAgICAgICAgdmFyIGJhc2VCbG9jayA9IHRoaXMuY3JlYXRlQmFzZUJsb2NrKHJhbmRvbURhdGEpO1xyXG4gICAgICAgICAgICB2YXIgc3BCbG9jayA9IHRoaXMuY3JlYXRTUEJsb2NrKHJhbmRvbURhdGEpO1xyXG4gICAgICAgICAgICBzaW5nbGVGbG9vci5hZGRDaGlsZHJlbihiYXNlQmxvY2ssIHNwQmxvY2spO1xyXG4gICAgICAgICAgICB2YXIgc2luZ2xlRmxvb3JQb3MgPSBzaW5nbGVGbG9vci50cmFuc2Zvcm0ucG9zaXRpb247XHJcbiAgICAgICAgICAgIHNpbmdsZUZsb29yUG9zLnkrPXRoaXMuRmxvb3JJbnRlcnY7XHJcbiAgICAgICAgICAgIC8vIHNpbmdsZUZsb29yLnRyYW5zZm9ybS50cmFuc2xhdGUoKVxyXG4gICAgICAgICAgICB0aGlzLmdhbWVPYmouYWRkQ2hpbGQoc2luZ2xlRmxvb3IpO1xyXG4gICAgICAgICAgICBjdXJMYXllcmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoq6I635Y+W6ZqP5py65pWw5o2uICovXHJcbiAgICBnZXRSYW5kb21EYXRhKCkge1xyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IExheWEubG9hZGVyLmdldFJlcyhcInJlcy9LSFhNLmpzb25cIik7XHJcbiAgICAgICAgdmFyIGpzb25BcnIgPSBPYmplY3Qua2V5cyhqc29uRGF0YSkubWFwKGtleSA9PiBqc29uRGF0YVtrZXldKTtcclxuICAgICAgICB2YXIgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBqc29uQXJyLmxlbmd0aCk7XHJcbiAgICAgICAgcmV0dXJuIGpzb25BcnJbcmFuZG9tSW5kZXhdO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlQmFzZUJsb2NrKHJhbmRvbURhdGEpIHtcclxuICAgICAgICB2YXIgYmFzZUJsb2NrT2JqcyA9IG5ldyBMYXlhLlNwcml0ZTNEKCk7XHJcbiAgICAgICAgaWYgKCFyYW5kb21EYXRhLmJhc2VfYmxvY2sgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuO1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcmFuZG9tRGF0YS5iYXNlX2Jsb2NrLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGxldCBvYmogPSByYW5kb21EYXRhLmJhc2VfYmxvY2tbal07XHJcbiAgICAgICAgICAgIGlmIChvYmopIHtcclxuICAgICAgICAgICAgICAgIHZhciBmbG9vckNsb25lID0gTGF5YS5TcHJpdGUzRC5pbnN0YW50aWF0ZSh0aGlzLmZsb29yQmFyUHJlZmFiLCBiYXNlQmxvY2tPYmpzLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBmbG9vckNsb25lLnRyYW5zZm9ybS5yb3RhdGUobmV3IExheWEuVmVjdG9yMygwLCAwLCAoaiAqIDIyLjUpKSwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgLy/lj43ovaxcclxuICAgICAgICAgICAgICAgIGlmIChyYW5kb21EYXRhLnJldmVyc2FsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmxvb3JDbG9uZS50cmFuc2Zvcm0ucm90YXRlKG5ldyBMYXlhLlZlY3RvcjMoMCwwLDE4MCApLCB0cnVlLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmxvb3JDbG9uZS50cmFuc2Zvcm0udHJhbnNsYXRlKG5ldyBMYXlhLlZlY3RvcjMoMiwwLDApKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZsb29yQ2xvbmUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYmFzZUJsb2NrT2JqcztcclxuICAgIH1cclxuICAgIGNyZWF0U1BCbG9jayhyYW5kb21EYXRhKSB7XHJcbiAgICAgICAgdmFyIHNwQmxvY2tPYmpzID0gbmV3IExheWEuU3ByaXRlM0QoKTtcclxuICAgICAgICBpZiAoIXJhbmRvbURhdGEuc3BfYmxvY2tfc2l6ZSBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm47XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCByYW5kb21EYXRhLnNwX2Jsb2NrX3NpemUubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgbGV0IG9iaiA9IHJhbmRvbURhdGEuc3BfYmxvY2tfc2l6ZVtqXTtcclxuICAgICAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICAgICAgbGV0IG51bSA9IDA7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobnVtIDwgb2JqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZsb29yQ2xvbmUgPSBMYXlhLlNwcml0ZTNELmluc3RhbnRpYXRlKHRoaXMuZmxvb3JCYXJQcmVmYWIsIHNwQmxvY2tPYmpzLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvb3JDbG9uZS50cmFuc2Zvcm0ucm90YXRlKG5ldyBMYXlhLlZlY3RvcjMoMCwgMCwgKG51bSAqIDIyLjUpKSwgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZmxvb3JDbG9uZeadkOi0qOiuvue9rlxyXG4gICAgICAgICAgICAgICAgICAgIGZsb29yQ2xvbmUubWVzaFJlbmRlcmVyLm1hdGVyaWFsLmFsYmVkb0NvbG9yID0gbmV3IExheWEuVmVjdG9yNCgwLjUsIDAuNSwgMC41LDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5re75Yqg5qCH562+XHJcbiAgICAgICAgICAgICAgICAgICAgZmxvb3JDbG9uZS5uYW1lID0gXCJTUFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsb29yQ2xvbmUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAvL+i1t+Wni+S9jee9rlxyXG4gICAgICAgICAgICAgICAgICAgIGZsb29yQ2xvbmUudHJhbnNmb3JtLnJvdGF0ZShuZXcgTGF5YS5WZWN0b3IzKDAsIDAsIHJhbmRvbURhdGEuc3BfYmxvY2tfc3RhcnRfcG9zW2pdICogMjIuNSksIHRydWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAvL+mAn+W6plxyXG4gICAgICAgICAgICAgICAgICAgIC8vcmFuZG9tRGF0YS5zcF9ibG9ja19tb3ZlX3NwZWVkXHJcbiAgICAgICAgICAgICAgICAgICAgbnVtKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNwQmxvY2tPYmpzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuRmxvb3JDcmVhdGVNYW5hZ2VyLkJBUl9UT0dFVEhFUl9OVU0gPSAxNjsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGbG9vck1vdmVNYW5hZ2VyIGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMueWF3UGl0Y2hSb2xsID0gbmV3IExheWEuVmVjdG9yMygpO1xuICAgICAgICB0aGlzLnRlbXBSb3RhdGlvblogPSBuZXcgTGF5YS5RdWF0ZXJuaW9uKCk7XG4gICAgICAgIHRoaXMucm90YWlvblNwZWVkID0gMC4wMDA1O1xuICAgIH1cbiAgICBvbkF3YWtlKCkge1xuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuTU9VU0VfRE9XTiwgdGhpcywgdGhpcy5tb3VzZURvd24pO1xuICAgICAgICBMYXlhLnN0YWdlLm9uKExheWEuRXZlbnQuTU9VU0VfVVAsIHRoaXMsIHRoaXMubW91c2VVcCk7XG4gICAgICAgIHRoaXMuZ2FtZU9iaiA9IHRoaXMub3duZXI7XG4gICAgfVxuICAgIF9vbkRlc3Ryb3koKSB7XG4gICAgICAgIC8v5YWz6Zet55uR5ZCs5Ye95pWwXG4gICAgICAgIExheWEuc3RhZ2Uub2ZmKExheWEuRXZlbnQuTU9VU0VfRE9XTiwgdGhpcywgdGhpcy5tb3VzZURvd24pO1xuICAgICAgICBMYXlhLnN0YWdlLm9mZihMYXlhLkV2ZW50Lk1PVVNFX1VQLCB0aGlzLCB0aGlzLm1vdXNlVXApO1xuICAgIH1cbiAgICBvblVwZGF0ZShzdGF0ZSkge1xuICAgICAgICB2YXIgZWxhcHNlZFRpbWUgPSBMYXlhLnRpbWVyLmRlbHRhO1xuICAgICAgICBpZiAoIWlzTmFOKHRoaXMubGFzdE1vdXNlWCkgJiYgdGhpcy5pc01vdXNlRG93bikge1xuICAgICAgICAgICAgdmFyIHNjZW5lID0gdGhpcy5vd25lci5zY2VuZTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRYID0gTGF5YS5zdGFnZS5tb3VzZVggLSB0aGlzLmxhc3RNb3VzZVg7XG4gICAgICAgICAgICB2YXIgeXByRWxlbSA9IHRoaXMueWF3UGl0Y2hSb2xsO1xuICAgICAgICAgICAgeXByRWxlbS54ICs9IG9mZnNldFggKiB0aGlzLnJvdGFpb25TcGVlZCAqIGVsYXBzZWRUaW1lO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVSb3RhdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdE1vdXNlWCA9IExheWEuc3RhZ2UubW91c2VYO1xuICAgIH1cbiAgICBtb3VzZURvd24oZSkge1xuICAgICAgICAvL+iOt+W+l+m8oOagh+eahOaXi+i9rOWAvFxuICAgICAgICB0aGlzLmdhbWVPYmoudHJhbnNmb3JtLmxvY2FsUm90YXRpb24uZ2V0WWF3UGl0Y2hSb2xsKHRoaXMueWF3UGl0Y2hSb2xsKTtcbiAgICAgICAgLy/ojrflvpfpvKDmoIfnmoR45YC8XG4gICAgICAgIHRoaXMubGFzdE1vdXNlWCA9IExheWEuc3RhZ2UubW91c2VYO1xuICAgICAgICAvL+iuvue9rmJvb2zlgLxcbiAgICAgICAgdGhpcy5pc01vdXNlRG93biA9IHRydWU7XG5cbiAgICB9XG4gICAgbW91c2VVcChlKSB7XG4gICAgICAgIC8v6K6+572uYm9vbOWAvFxuICAgICAgICB0aGlzLmlzTW91c2VEb3duID0gZmFsc2U7XG4gICAgfVxuICAgIHVwZGF0ZVJvdGF0aW9uKCkge1xuICAgICAgICBMYXlhLlF1YXRlcm5pb24uY3JlYXRlRnJvbVlhd1BpdGNoUm9sbCh0aGlzLnlhd1BpdGNoUm9sbC54LCB0aGlzLnlhd1BpdGNoUm9sbC55LCB0aGlzLnlhd1BpdGNoUm9sbC56LCB0aGlzLnRlbXBSb3RhdGlvblopO1xuICAgICAgICB0aGlzLnRlbXBSb3RhdGlvblouY2xvbmVUbyh0aGlzLmdhbWVPYmoudHJhbnNmb3JtLmxvY2FsUm90YXRpb24pO1xuICAgICAgICB0aGlzLmdhbWVPYmoudHJhbnNmb3JtLmxvY2FsUm90YXRpb24gPSB0aGlzLmdhbWVPYmoudHJhbnNmb3JtLmxvY2FsUm90YXRpb247XG4gICAgfVxufSIsImltcG9ydCBNYW5NYW5hZ2VyIGZyb20gXCIuL01hbk1hbmFnZXJcIjtcclxuaW1wb3J0IEZsb29yTW92ZU1hbmFnZXIgZnJvbSBcIi4vRmxvb3JNb3ZlTWFuYWdlclwiO1xyXG5pbXBvcnQgRmxvb3JDcmVhdGVNYW5hZ2VyIGZyb20gXCIuL0Zsb29yQ3JlYXRlTWFuYWdlclwiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lTWFpblNjZW5lIGV4dGVuZHMgTGF5YS5TY3JpcHQzRCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIC8vIHRoaXMubWFpbkNhbWVyYSA9IDA7XHJcbiAgICAgICAgLy8gdGhpcy5tYWluTGlnaHQgPSAwO1xyXG4gICAgICAgIC8vIHRoaXMubWFuID0gMDtcclxuICAgICAgICAvLyB0aGlzLmZsb29yQmFyUHJlZmFiID0gMDtcclxuICAgICAgICAvLyB0aGlzLmNyZWF0Rmxvb3IgPSAwO1xyXG4gICAgfVxyXG4gICAgb25Bd2FrZSgpIHtcclxuICAgICAgICB0aGlzLnNjZW5lID0gdGhpcy5vd25lcjtcclxuICAgIH1cclxuICAgIG9uU3RhcnQoKSB7XHJcbiAgICAgICAgdmFyIG1haW5DYW1lcmEgPSB0aGlzLnNjZW5lLmdldENoaWxkQnlOYW1lKFwiTWFpbiBDYW1lcmFcIik7XHJcbiAgICAgICAgdmFyIG1haW5MaWdodCA9IHRoaXMuc2NlbmUuZ2V0Q2hpbGRCeU5hbWUoXCJEaXJlY3Rpb25hbCBMaWdodFwiKTtcclxuICAgICAgICAvL+iOt+WPluWwj+eQg1xyXG4gICAgICAgIHZhciBtYW4gPSB0aGlzLnNjZW5lLmdldENoaWxkQnlOYW1lKFwiTWFuXCIpO1xyXG4gICAgICAgIG1hbi5hZGRDb21wb25lbnQoTWFuTWFuYWdlcik7XHJcbiAgICAgICAgLy/lnLDmnb/lnZfpooTliLbkvZNcclxuICAgICAgICB2YXIgZmxvb3JCYXJQcmVmYWIgPSB0aGlzLnNjZW5lLmdldENoaWxkQnlOYW1lKFwiRmxvb3JCYXJcIik7XHJcbiAgICAgICAgLy/lnLDmnb8o5aSN5ZCIKVxyXG4gICAgICAgIHZhciBjcmVhdEZsb29yID0gdGhpcy5zY2VuZS5nZXRDaGlsZEJ5TmFtZShcIkZsb29yQ3JlYXRcIik7XHJcbiAgICAgICAgY3JlYXRGbG9vci5hZGRDb21wb25lbnQoRmxvb3JDcmVhdGVNYW5hZ2VyKS5mbG9vckJhclByZWZhYiA9IGZsb29yQmFyUHJlZmFiO1xyXG4gICAgICAgIGNyZWF0Rmxvb3IuYWRkQ29tcG9uZW50KEZsb29yTW92ZU1hbmFnZXIpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IEdhbWVNYWluU2NlbmUgZnJvbSBcIi4vR2FtZU1haW5TY2VuZVwiO1xyXG5cclxuLyoqXHJcbiAqIOacrOekuuS+i+mHh+eUqOmdnuiEmuacrOeahOaWueW8j+WunueOsO+8jOiAjOS9v+eUqOe7p+aJv+mhtemdouWfuuexu++8jOWunueOsOmhtemdoumAu+i+keOAguWcqElERemHjOmdouiuvue9ruWcuuaZr+eahFJ1bnRpbWXlsZ7mgKfljbPlj6/lkozlnLrmma/ov5vooYzlhbPogZRcclxuICog55u45q+U6ISa5pys5pa55byP77yM57un5om/5byP6aG16Z2i57G777yM5Y+v5Lul55u05o6l5L2/55So6aG16Z2i5a6a5LmJ55qE5bGe5oCn77yI6YCa6L+HSURF5YaFdmFy5bGe5oCn5a6a5LmJ77yJ77yM5q+U5aaCdGhpcy50aXBMYmxs77yMdGhpcy5zY29yZUxibO+8jOWFt+acieS7o+eggeaPkOekuuaViOaenFxyXG4gKiDlu7rorq7vvJrlpoLmnpzmmK/pobXpnaLnuqfnmoTpgLvovpHvvIzpnIDopoHpopHnuYHorr/pl67pobXpnaLlhoXlpJrkuKrlhYPntKDvvIzkvb/nlKjnu6fmib/lvI/lhpnms5XvvIzlpoLmnpzmmK/ni6znq4vlsI/mqKHlnZfvvIzlip/og73ljZXkuIDvvIzlu7rorq7nlKjohJrmnKzmlrnlvI/lrp7njrDvvIzmr5TlpoLlrZDlvLnohJrmnKzjgIJcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVVSSBleHRlbmRzIExheWEuU2NlbmUge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICAvL+WKoOi9veWcuuaZr+aWh+S7tlxyXG4gICAgICAgIHRoaXMubG9hZFNjZW5lKFwidGVzdC9UZXN0U2NlbmUuc2NlbmVcIik7XHJcbiAgICAgICAgdmFyIHJlc291cmNlID0gW1xyXG4gICAgICAgICAgICB7IHVybDogXCJMYXlhU2NlbmVfU2FtcGxlU2NlbmUvQ29udmVudGlvbmFsL1NhbXBsZVNjZW5lLmxzXCIsIHR5cGU6IExheWEzRC5ISUVSQVJDSFksIHByaW9yaXR5OiAxIH0sXHJcbiAgICAgICAgXVxyXG4gICAgICAgIC8v6aKE5Yqg6L29dW5pdHnlnLrmma9cclxuICAgICAgICBMYXlhLmxvYWRlci5jcmVhdGUocmVzb3VyY2UsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkxvYWRGaW5pc2gpKTtcclxuICAgICAgICAvL+mihOWKoOi9vWpzb25cclxuICAgICAgICBMYXlhLmxvYWRlci5sb2FkKFwicmVzL0tIWE0uanNvblwiLCBMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsIHRoaXMub25Mb2FkZWQpLCBudWxsLCBMYXlhLkxvYWRlci5KU09OLCAwKTtcclxuICAgIH1cclxuICAgIG9uTG9hZEZpbmlzaCgpIHtcclxuICAgICAgICB2YXIgZmlnaHRTY2VuZSA9IExheWEuTG9hZGVyLmdldFJlcyhcIkxheWFTY2VuZV9TYW1wbGVTY2VuZS9Db252ZW50aW9uYWwvU2FtcGxlU2NlbmUubHNcIik7XHJcbiAgICAgICAgTGF5YS5zdGFnZS5hZGRDaGlsZChmaWdodFNjZW5lKTtcclxuICAgICAgICBmaWdodFNjZW5lLmFkZENvbXBvbmVudChHYW1lTWFpblNjZW5lKTtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBNYW5NYW5hZ2VyIGV4dGVuZHMgTGF5YS5TY3JpcHQzRHtcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLm1hblN0YXR1cz0wO1xyXG4gICAgICAgIHRoaXMubWFuU3BlZWQ9MDtcclxuICAgICAgICB0aGlzLm1hblJpZ2J5PTA7XHJcbiAgICB9XHJcbiAgICBvbkF3YWtlKCl7XHJcbiAgICAgICAgdGhpcy5nYW1lT2JqPXRoaXMub3duZXI7XHJcbiAgICB9XHJcbiAgICBvblN0YXJ0KCl7XHJcbiAgICAgICAgdGhpcy5tYW5SaWdieT10aGlzLmdhbWVPYmouZ2V0Q29tcG9uZW50KExheWEuUmlnaWRib2R5M0QpO1xyXG5cclxuICAgIH1cclxuICAgIG9uVXBkYXRlKCl7XHJcblxyXG4gICAgfVxyXG4gICAgTWFuTW92ZSgpe1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG59IiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbnZhciBDTEFTUyQ9TGF5YS5jbGFzcztcclxudmFyIFNUQVRJQ0FUVFIkPUxheWEuc3RhdGljO1xudmFyIFZpZXc9bGF5YS51aS5WaWV3O1xyXG52YXIgRGlhbG9nPWxheWEudWkuRGlhbG9nO1xyXG52YXIgU2NlbmU9TGF5YS5TY2VuZTtcbmlmKCF3aW5kb3cudWkpIHdpbmRvdy51aT17fTtcbnZhciBUZXN0U2NlbmVVST0oZnVuY3Rpb24oX3N1cGVyKXtcclxuXHRcdGZ1bmN0aW9uIFRlc3RTY2VuZVVJKCl7XHJcblx0XHRcdFxyXG5cdFx0XHRUZXN0U2NlbmVVSS5fX3N1cGVyLmNhbGwodGhpcyk7XHJcblx0XHR9XHJcblx0XHRDTEFTUyQoVGVzdFNjZW5lVUksJ3VpLnRlc3QuVGVzdFNjZW5lVUknLF9zdXBlcik7XHJcblx0XHR2YXIgX19wcm90b19fPVRlc3RTY2VuZVVJLnByb3RvdHlwZTtcclxuXHRcdF9fcHJvdG9fXy5jcmVhdGVDaGlsZHJlbj1mdW5jdGlvbigpe1xyXG5cdFx0XHRfc3VwZXIucHJvdG90eXBlLmNyZWF0ZUNoaWxkcmVuLmNhbGwodGhpcyk7XHJcblx0XHRcdHRoaXMubG9hZFNjZW5lKFwidGVzdC9UZXN0U2NlbmVcIik7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gVGVzdFNjZW5lVUk7XHJcblx0fSkoU2NlbmUpO1xuZXhwb3J0IHt1aSBhcyBkZWZhdWx0fTsiXX0=
